import{Q as Re}from"./QSpace-DkvF35s-.js";import{z as ue,l as f,q as c,A as ye,g as Se,af as He,V as Gt,ag as yt,X as Wt,r as Z,ah as Kt,Z as Xt,ai as Yt,$ as Zt,aj as Jt,m as W,E as Xe,I as rt,M as st,ak as St,al as el,U as tl,G as ll,d as H,am as nt,an as al,x as ol,ao as rl,ap as sl,aq as wt,ar as nl,W as Ct,Y as _t,as as il,at as Ye,au as it,av as ul,a2 as Pt,aw as cl,ax as $e,ay as me,f as B,aa as kt,_ as dl,c as E,o as F,w as v,a as s,Q as Ve,e as Y,b as N,ae as re,a8 as se,a7 as Ie,F as Ge,a9 as We,a6 as z,t as ne,ac as vl,a3 as ge,h as Ke,az as fl,aA as ml,aB as gl}from"./index-C5eEiiJj.js";import{v as bl,g as ut,u as hl,p as ct,h as yl,i as Sl,j as wl,r as dt,s as Cl,c as vt,e as ft,Q as ie,a as L,d as be}from"./format-n1xofCzZ.js";import{Q as Ze,C as he}from"./ClosePopup-fEkiDPaD.js";import{Q as mt,a as _l}from"./QBtnDropdown-BHdoZ7r9.js";import{Q as Pl}from"./QImg-CJcnaUOt.js";import{Q as kl}from"./QMarkupTable-CcCdiBMs.js";import{u as ql,a as pl,c as qt,Q as pt}from"./QSelect-R-hQMdw0.js";import{u as xl,a as Tl,b as Rl}from"./use-fullscreen-BKdPQE55.js";import{Q as Vl}from"./QForm-CrOeCIiF.js";import{Q as Fl}from"./QPage-gn5Q2dCe.js";const Fe=ue({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:t}){const r=Se(),g=f(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return c("td",{class:g.value},ye(t.default));const o=r.vnode.key,i=(e.props.colsMap!==void 0?e.props.colsMap[o]:null)||e.props.col;if(i===void 0)return;const{row:a}=e.props;return c("td",{class:g.value+i.__tdClass(a),style:i.__tdStyle(a)},ye(t.default))}}}),Ol=ue({name:"QTooltip",inheritAttrs:!1,props:{...hl,...Wt,...He,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...He.transitionShow,default:"jump-down"},transitionHide:{...He.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:ut},self:{type:String,default:"top middle",validator:ut},offset:{type:Array,default:()=>[14,14],validator:bl},scrollTarget:yt,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Gt],setup(e,{slots:t,emit:r,attrs:g}){let o,i;const a=Se(),{proxy:{$q:u}}=a,m=Z(null),S=Z(!1),n=f(()=>ct(e.anchor,u.lang.rtl)),C=f(()=>ct(e.self,u.lang.rtl)),P=f(()=>e.persistent!==!0),{registerTick:k,removeTick:q}=Kt(),{registerTimeout:_}=Xt(),{transitionProps:w,transitionStyle:A}=Yt(e),{localScrollTarget:D,changeScrollEvent:Q,unconfigureScrollTarget:R}=yl(e,Ce),{anchorEl:p,canShow:J,anchorEvents:K}=Sl({showing:S,configureAnchorEl:te}),{show:ce,hide:ee}=Zt({showing:S,canShow:J,handleShow:we,handleHide:Be,hideOnRouteChange:P,processOnMount:!0});Object.assign(K,{delayShow:ve,delayHide:Ae});const{showPortal:M,hidePortal:$,renderPortal:De}=Jt(a,m,_e,"tooltip");if(u.platform.is.mobile===!0){const O={anchorEl:p,innerRef:m,onClickOutside(G){return ee(G),G.target.classList.contains("q-dialog__backdrop")&&tl(G),!0}},fe=f(()=>e.modelValue===null&&e.persistent!==!0&&S.value===!0);W(fe,G=>{(G===!0?wl:dt)(O)}),Xe(()=>{dt(O)})}function we(O){M(),k(()=>{i=new MutationObserver(()=>I()),i.observe(m.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),I(),Ce()}),o===void 0&&(o=W(()=>u.screen.width+"|"+u.screen.height+"|"+e.self+"|"+e.anchor+"|"+u.lang.rtl,I)),_(()=>{M(!0),r("show",O)},e.transitionDuration)}function Be(O){q(),$(),de(),_(()=>{$(!0),r("hide",O)},e.transitionDuration)}function de(){i!==void 0&&(i.disconnect(),i=void 0),o!==void 0&&(o(),o=void 0),R(),rt(K,"tooltipTemp")}function I(){Cl({targetEl:m.value,offset:e.offset,anchorEl:p.value,anchorOrigin:n.value,selfOrigin:C.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ve(O){if(u.platform.is.mobile===!0){vt(),document.body.classList.add("non-selectable");const fe=p.value,G=["touchmove","touchcancel","touchend","click"].map(le=>[fe,le,"delayHide","passiveCapture"]);st(K,"tooltipTemp",G)}_(()=>{ce(O)},e.delay)}function Ae(O){u.platform.is.mobile===!0&&(rt(K,"tooltipTemp"),vt(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),_(()=>{ee(O)},e.hideDelay)}function te(){if(e.noParentEvent===!0||p.value===null)return;const O=u.platform.is.mobile===!0?[[p.value,"touchstart","delayShow","passive"]]:[[p.value,"mouseenter","delayShow","passive"],[p.value,"mouseleave","delayHide","passive"]];st(K,"anchor",O)}function Ce(){if(p.value!==null||e.scrollTarget!==void 0){D.value=St(p.value,e.scrollTarget);const O=e.noParentEvent===!0?I:ee;Q(D.value,O)}}function U(){return S.value===!0?c("div",{...g,ref:m,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",g.class],style:[g.style,A.value],role:"tooltip"},ye(t.default)):null}function _e(){return c(el,w.value,U)}return Xe(de),Object.assign(a.proxy,{updatePosition:I}),De}}),Dl=ue({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:t,emit:r}){const g=Se(),{proxy:{$q:o}}=g,i=a=>{r("click",a)};return()=>{if(e.props===void 0)return c("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:i},ye(t.default));let a,u;const m=g.vnode.key;if(m){if(a=e.props.colsMap[m],a===void 0)return}else a=e.props.col;if(a.sortable===!0){const n=a.align==="right"?"unshift":"push";u=ll(t.default,[]),u[n](c(H,{class:a.__iconClass,name:o.iconSet.table.arrowUp}))}else u=ye(t.default);const S={class:a.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:a.headerStyle,onClick:n=>{a.sortable===!0&&e.props.sort(a),i(n)}};return c("th",S,u)}}});function xt(e,t){return c("div",e,[c("table",{class:"q-table"},t)])}const Bl={list:Ze,table:kl},Al=["list","table","__qtable"],Ql=ue({name:"QVirtualScroll",props:{...ql,type:{type:String,default:"list",validator:e=>Al.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:yt},setup(e,{slots:t,attrs:r}){let g;const o=Z(null),i=f(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:a,localResetVirtualScroll:u,padVirtualScroll:m,onVirtualScrollEvt:S}=pl({virtualScrollLength:i,getVirtualScrollTarget:q,getVirtualScrollEl:k}),n=f(()=>{if(i.value===0)return[];const D=(Q,R)=>({index:a.value.from+R,item:Q});return e.itemsFn===void 0?e.items.slice(a.value.from,a.value.to).map(D):e.itemsFn(a.value.from,a.value.to-a.value.from).map(D)}),C=f(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),P=f(()=>e.scrollTarget!==void 0?{}:{tabindex:0});W(i,()=>{u()}),W(()=>e.scrollTarget,()=>{w(),_()});function k(){return o.value.$el||o.value}function q(){return g}function _(){g=St(k(),e.scrollTarget),g.addEventListener("scroll",S,nt.passive)}function w(){g!==void 0&&(g.removeEventListener("scroll",S,nt.passive),g=void 0)}function A(){let D=m(e.type==="list"?"div":"tbody",n.value.map(t.default));return t.before!==void 0&&(D=t.before().concat(D)),wt(t.after,D)}return al(()=>{u()}),ol(()=>{_()}),rl(()=>{_()}),sl(()=>{w()}),Xe(()=>{w()}),()=>{if(t.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?xt({ref:o,class:"q-table__middle "+C.value},A()):c(Bl[e.type],{...r,ref:o,class:[r.class,C.value],...P.value},A)}}}),El={xs:2,sm:4,md:6,lg:10,xl:14};function gt(e,t,r){return{transform:t===!0?`translateX(${r.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}const Nl=ue({name:"QLinearProgress",props:{...Ct,...nl,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:t}){const{proxy:r}=Se(),g=_t(e,r.$q),o=il(e,El),i=f(()=>e.indeterminate===!0||e.query===!0),a=f(()=>e.reverse!==e.query),u=f(()=>({...o.value!==null?o.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),m=f(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),S=f(()=>gt(e.buffer!==void 0?e.buffer:1,a.value,r.$q)),n=f(()=>`with${e.instantFeedback===!0?"out":""}-transition`),C=f(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${n.value} q-linear-progress__track--${g.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),P=f(()=>gt(i.value===!0?1:e.value,a.value,r.$q)),k=f(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${n.value} q-linear-progress__model--${i.value===!0?"in":""}determinate`),q=f(()=>({width:`${e.value*100}%`})),_=f(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${n.value}`);return()=>{const w=[c("div",{class:C.value,style:S.value}),c("div",{class:k.value,style:P.value})];return e.stripe===!0&&i.value===!1&&w.push(c("div",{class:_.value,style:q.value})),c("div",{class:m.value,style:u.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},wt(t.default,w))}}});function Ll(e,t){return new Date(e)-new Date(t)}const Ml={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function Ul(e,t,r,g){const o=f(()=>{const{sortBy:u}=t.value;return u&&r.value.find(m=>m.name===u)||null}),i=f(()=>e.sortMethod!==void 0?e.sortMethod:(u,m,S)=>{const n=r.value.find(k=>k.name===m);if(n===void 0||n.field===void 0)return u;const C=S===!0?-1:1,P=typeof n.field=="function"?k=>n.field(k):k=>k[n.field];return u.sort((k,q)=>{let _=P(k),w=P(q);return n.rawSort!==void 0?n.rawSort(_,w,k,q)*C:_==null?-1*C:w==null?1*C:n.sort!==void 0?n.sort(_,w,k,q)*C:Ye(_)===!0&&Ye(w)===!0?(_-w)*C:it(_)===!0&&it(w)===!0?Ll(_,w)*C:typeof _=="boolean"&&typeof w=="boolean"?(_-w)*C:([_,w]=[_,w].map(A=>(A+"").toLocaleString().toLowerCase()),_<w?-1*C:_===w?0:C)})});function a(u){let m=e.columnSortOrder;if(ul(u)===!0)u.sortOrder&&(m=u.sortOrder),u=u.name;else{const C=r.value.find(P=>P.name===u);C?.sortOrder&&(m=C.sortOrder)}let{sortBy:S,descending:n}=t.value;S!==u?(S=u,n=m==="da"):e.binaryStateSort===!0?n=!n:n===!0?m==="ad"?S=null:n=!1:m==="ad"?n=!0:S=null,g({sortBy:S,descending:n,page:1})}return{columnToSort:o,computedSortMethod:i,sort:a}}const jl={filter:[String,Object],filterMethod:Function};function zl(e,t){const r=f(()=>e.filterMethod!==void 0?e.filterMethod:(g,o,i,a)=>{const u=o?o.toLowerCase():"";return g.filter(m=>i.some(S=>{const n=a(S,m)+"";return(n==="undefined"||n==="null"?"":n.toLowerCase()).indexOf(u)!==-1}))});return W(()=>e.filter,()=>{Pt(()=>{t({page:1},!0)})},{deep:!0}),{computedFilterMethod:r}}function Hl(e,t){for(const r in t)if(t[r]!==e[r])return!1;return!0}function bt(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const $l={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Il(e,t){const{props:r,emit:g}=e,o=Z(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:r.rowsPerPageOptions.length!==0?r.rowsPerPageOptions[0]:5},r.pagination)),i=f(()=>{const n=r["onUpdate:pagination"]!==void 0?{...o.value,...r.pagination}:o.value;return bt(n)}),a=f(()=>i.value.rowsNumber!==void 0);function u(n){m({pagination:n,filter:r.filter})}function m(n={}){Pt(()=>{g("request",{pagination:n.pagination||i.value,filter:n.filter||r.filter,getCellValue:t})})}function S(n,C){const P=bt({...i.value,...n});if(Hl(i.value,P)===!0){a.value===!0&&C===!0&&u(P);return}if(a.value===!0){u(P);return}r.pagination!==void 0&&r["onUpdate:pagination"]!==void 0?g("update:pagination",P):o.value=P}return{innerPagination:o,computedPagination:i,isServerSide:a,requestServerInteraction:m,setPagination:S}}function Gl(e,t,r,g,o,i){const{props:a,emit:u,proxy:{$q:m}}=e,S=f(()=>g.value===!0?r.value.rowsNumber||0:i.value),n=f(()=>{const{page:R,rowsPerPage:p}=r.value;return(R-1)*p}),C=f(()=>{const{page:R,rowsPerPage:p}=r.value;return R*p}),P=f(()=>r.value.page===1),k=f(()=>r.value.rowsPerPage===0?1:Math.max(1,Math.ceil(S.value/r.value.rowsPerPage))),q=f(()=>C.value===0?!0:r.value.page>=k.value),_=f(()=>(a.rowsPerPageOptions.includes(t.value.rowsPerPage)?a.rowsPerPageOptions:[t.value.rowsPerPage].concat(a.rowsPerPageOptions)).map(p=>({label:p===0?m.lang.table.allRows:""+p,value:p})));W(k,(R,p)=>{if(R===p)return;const J=r.value.page;R&&!J?o({page:1}):R<J&&o({page:R})});function w(){o({page:1})}function A(){const{page:R}=r.value;R>1&&o({page:R-1})}function D(){const{page:R,rowsPerPage:p}=r.value;C.value>0&&R*p<S.value&&o({page:R+1})}function Q(){o({page:k.value})}return a["onUpdate:pagination"]!==void 0&&u("update:pagination",{...r.value}),{firstRowIndex:n,lastRowIndex:C,isFirstPage:P,isLastPage:q,pagesNumber:k,computedRowsPerPageOptions:_,computedRowsNumber:S,firstPage:w,prevPage:A,nextPage:D,lastPage:Q}}const Wl={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},Kl=["update:selected","selection"];function Xl(e,t,r,g){const o=f(()=>{const q={};return e.selected.map(g.value).forEach(_=>{q[_]=!0}),q}),i=f(()=>e.selection!=="none"),a=f(()=>e.selection==="single"),u=f(()=>e.selection==="multiple"),m=f(()=>r.value.length!==0&&r.value.every(q=>o.value[g.value(q)]===!0)),S=f(()=>m.value!==!0&&r.value.some(q=>o.value[g.value(q)]===!0)),n=f(()=>e.selected.length);function C(q){return o.value[q]===!0}function P(){t("update:selected",[])}function k(q,_,w,A){t("selection",{rows:_,added:w,keys:q,evt:A});const D=a.value===!0?w===!0?_:[]:w===!0?e.selected.concat(_):e.selected.filter(Q=>q.includes(g.value(Q))===!1);t("update:selected",D)}return{hasSelectionMode:i,singleSelection:a,multipleSelection:u,allRowsSelected:m,someRowsSelected:S,rowsSelectedNumber:n,isRowSelected:C,clearSelection:P,updateSelection:k}}function ht(e){return Array.isArray(e)?e.slice():[]}const Yl={expanded:Array},Zl=["update:expanded"];function Jl(e,t){const r=Z(ht(e.expanded));W(()=>e.expanded,a=>{r.value=ht(a)});function g(a){return r.value.includes(a)}function o(a){e.expanded!==void 0?t("update:expanded",a):r.value=a}function i(a,u){const m=r.value.slice(),S=m.indexOf(a);u===!0?S===-1&&(m.push(a),o(m)):S!==-1&&(m.splice(S,1),o(m))}return{isRowExpanded:g,setExpanded:o,updateExpanded:i}}const ea={visibleColumns:Array};function ta(e,t,r){const g=f(()=>{if(e.columns!==void 0)return e.columns;const u=e.rows[0];return u!==void 0?Object.keys(u).map(m=>({name:m,label:m.toUpperCase(),field:m,align:Ye(u[m])?"right":"left",sortable:!0})):[]}),o=f(()=>{const{sortBy:u,descending:m}=t.value;return(e.visibleColumns!==void 0?g.value.filter(n=>n.required===!0||e.visibleColumns.includes(n.name)===!0):g.value).map(n=>{const C=n.align||"right",P=`text-${C}`;return{...n,align:C,__iconClass:`q-table__sort-icon q-table__sort-icon--${C}`,__thClass:P+(n.headerClasses!==void 0?" "+n.headerClasses:"")+(n.sortable===!0?" sortable":"")+(n.name===u?` sorted ${m===!0?"sort-desc":""}`:""),__tdStyle:n.style!==void 0?typeof n.style!="function"?()=>n.style:n.style:()=>null,__tdClass:n.classes!==void 0?typeof n.classes!="function"?()=>P+" "+n.classes:k=>P+" "+n.classes(k):()=>P}})}),i=f(()=>{const u={};return o.value.forEach(m=>{u[m.name]=m}),u}),a=f(()=>e.tableColspan!==void 0?e.tableColspan:o.value.length+(r.value===!0?1:0));return{colList:g,computedCols:o,computedColsMap:i,computedColspan:a}}const Oe="q-table__bottom row items-center",Tt={};qt.forEach(e=>{Tt[e]={}});const la=ue({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...Tt,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],tableRowStyleFn:Function,tableRowClassFn:Function,cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],cardStyleFn:Function,cardClassFn:Function,hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Ct,...Tl,...ea,...jl,...$l,...Yl,...Wl,...Ml},emits:["request","virtualScroll",...xl,...Zl,...Kl],setup(e,{slots:t,emit:r}){const g=Se(),{proxy:{$q:o}}=g,i=_t(e,o),{inFullscreen:a,toggleFullscreen:u}=Rl(),m=f(()=>typeof e.rowKey=="function"?e.rowKey:l=>l[e.rowKey]),S=Z(null),n=Z(null),C=f(()=>e.grid!==!0&&e.virtualScroll===!0),P=f(()=>" q-table__card"+(i.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),k=f(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":P.value)+(i.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(a.value===!0?" fullscreen scroll":"")),q=f(()=>k.value+(e.loading===!0?" q-table--loading":""));W(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+k.value,()=>{C.value===!0&&n.value?.reset()});const{innerPagination:_,computedPagination:w,isServerSide:A,requestServerInteraction:D,setPagination:Q}=Il(g,ae),{computedFilterMethod:R}=zl(e,Q),{isRowExpanded:p,setExpanded:J,updateExpanded:K}=Jl(e,r),ce=f(()=>{let l=e.rows;if(A.value===!0||l.length===0)return l;const{sortBy:d,descending:b}=w.value;return e.filter&&(l=R.value(l,e.filter,U.value,ae)),fe.value!==null&&(l=G.value(e.rows===l?l.slice():l,d,b)),l}),ee=f(()=>ce.value.length),M=f(()=>{let l=ce.value;if(A.value===!0)return l;const{rowsPerPage:d}=w.value;return d!==0&&(Pe.value===0&&e.rows!==l?l.length>ke.value&&(l=l.slice(0,ke.value)):l=l.slice(Pe.value,ke.value)),l}),{hasSelectionMode:$,singleSelection:De,multipleSelection:we,allRowsSelected:Be,someRowsSelected:de,rowsSelectedNumber:I,isRowSelected:ve,clearSelection:Ae,updateSelection:te}=Xl(e,r,M,m),{colList:Ce,computedCols:U,computedColsMap:_e,computedColspan:O}=ta(e,w,$),{columnToSort:fe,computedSortMethod:G,sort:le}=Ul(e,w,Ce,Q),{firstRowIndex:Pe,lastRowIndex:ke,isFirstPage:Qe,isLastPage:Ee,pagesNumber:qe,computedRowsPerPageOptions:Rt,computedRowsNumber:pe,firstPage:Ne,prevPage:Le,nextPage:Me,lastPage:Ue}=Gl(g,_,w,A,Q,ee),Vt=f(()=>M.value.length===0),Ft=f(()=>{const l={};return qt.forEach(d=>{l[d]=e[d]}),l.virtualScrollItemSize===void 0&&(l.virtualScrollItemSize=e.dense===!0?28:48),l});function Ot(){C.value===!0&&n.value.reset()}function Dt(){if(e.grid===!0)return $t();const l=e.hideHeader!==!0?at:null;if(C.value===!0){const b=t["top-row"],h=t["bottom-row"],y={default:V=>et(V.item,t.body,V.index)};if(b!==void 0){const V=c("tbody",b({cols:U.value}));y.before=l===null?()=>V:()=>[l()].concat(V)}else l!==null&&(y.before=l);return h!==void 0&&(y.after=()=>c("tbody",h({cols:U.value}))),c(Ql,{ref:n,class:e.tableClass,style:e.tableStyle,...Ft.value,scrollTarget:e.virtualScrollTarget,items:M.value,type:"__qtable",tableColspan:O.value,onVirtualScroll:At},y)}const d=[Qt()];return l!==null&&d.unshift(l()),xt({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},d)}function Bt(l,d){if(n.value!==null){n.value.scrollTo(l,d);return}l=parseInt(l,10);const b=S.value.querySelector(`tbody tr:nth-of-type(${l+1})`);if(b!==null){const h=S.value.querySelector(".q-table__middle.scroll"),y=b.offsetTop-e.virtualScrollStickySizeStart,V=y<h.scrollTop?"decrease":"increase";h.scrollTop=y,r("virtualScroll",{index:l,from:0,to:_.value.rowsPerPage-1,direction:V})}}function At(l){r("virtualScroll",l)}function Je(){return[c(Nl,{class:"q-table__linear-progress",color:e.color,dark:i.value,indeterminate:!0,trackColor:"transparent"})]}function et(l,d,b){const h=m.value(l),y=ve(h);if(d!==void 0){const T={key:h,row:l,pageIndex:b,__trClass:y?"selected":""};if(e.tableRowStyleFn!==void 0&&(T.__trStyle=e.tableRowStyleFn(l)),e.tableRowClassFn!==void 0){const X=e.tableRowClassFn(l);X&&(T.__trClass=`${X} ${T.__trClass}`)}return d(tt(T))}const V=t["body-cell"],x=U.value.map(T=>{const X=t[`body-cell-${T.name}`],Te=X!==void 0?X:V;return Te!==void 0?Te(Et({key:h,row:l,pageIndex:b,col:T})):c("td",{class:T.__tdClass(l),style:T.__tdStyle(l)},ae(T,l))});if($.value===!0){const T=t["body-selection"],X=T!==void 0?T(Nt({key:h,row:l,pageIndex:b})):[c($e,{modelValue:y,color:e.color,dark:i.value,dense:e.dense,"onUpdate:modelValue":(Te,It)=>{te([h],[l],Te,It)}})];x.unshift(c("td",{class:"q-table--col-auto-width"},X))}const j={key:h,class:{selected:y}};if(e.onRowClick!==void 0&&(j.class["cursor-pointer"]=!0,j.onClick=T=>{r("rowClick",T,l,b)}),e.onRowDblclick!==void 0&&(j.class["cursor-pointer"]=!0,j.onDblclick=T=>{r("rowDblclick",T,l,b)}),e.onRowContextmenu!==void 0&&(j.class["cursor-pointer"]=!0,j.onContextmenu=T=>{r("rowContextmenu",T,l,b)}),e.tableRowStyleFn!==void 0&&(j.style=e.tableRowStyleFn(l)),e.tableRowClassFn!==void 0){const T=e.tableRowClassFn(l);T&&(j.class[T]=!0)}return c("tr",j,x)}function Qt(){const l=t.body,d=t["top-row"],b=t["bottom-row"];let h=M.value.map((y,V)=>et(y,l,V));return d!==void 0&&(h=d({cols:U.value}).concat(h)),b!==void 0&&(h=h.concat(b({cols:U.value}))),c("tbody",h)}function tt(l){return je(l),l.cols=l.cols.map(d=>me({...d},"value",()=>ae(d,l.row))),l}function Et(l){return je(l),me(l,"value",()=>ae(l.col,l.row)),l}function Nt(l){return je(l),l}function je(l){Object.assign(l,{cols:U.value,colsMap:_e.value,sort:le,rowIndex:Pe.value+l.pageIndex,color:e.color,dark:i.value,dense:e.dense}),$.value===!0&&me(l,"selected",()=>ve(l.key),(d,b)=>{te([l.key],[l.row],d,b)}),me(l,"expand",()=>p(l.key),d=>{K(l.key,d)})}function ae(l,d){const b=typeof l.field=="function"?l.field(d):d[l.field];return l.format!==void 0?l.format(b,d):b}const oe=f(()=>({pagination:w.value,pagesNumber:qe.value,isFirstPage:Qe.value,isLastPage:Ee.value,firstPage:Ne,prevPage:Le,nextPage:Me,lastPage:Ue,inFullscreen:a.value,toggleFullscreen:u}));function Lt(){const l=t.top,d=t["top-left"],b=t["top-right"],h=t["top-selection"],y=$.value===!0&&h!==void 0&&I.value>0,V="q-table__top relative-position row items-center";if(l!==void 0)return c("div",{class:V},[l(oe.value)]);let x;if(y===!0?x=h(oe.value).slice():(x=[],d!==void 0?x.push(c("div",{class:"q-table__control"},[d(oe.value)])):e.title&&x.push(c("div",{class:"q-table__control"},[c("div",{class:["q-table__title",e.titleClass]},e.title)]))),b!==void 0&&(x.push(c("div",{class:"q-table__separator col"})),x.push(c("div",{class:"q-table__control"},[b(oe.value)]))),x.length!==0)return c("div",{class:V},x)}const lt=f(()=>de.value===!0?null:Be.value);function at(){const l=Mt();return e.loading===!0&&t.loading===void 0&&l.push(c("tr",{class:"q-table__progress"},[c("th",{class:"relative-position",colspan:O.value},Je())])),c("thead",l)}function Mt(){const l=t.header,d=t["header-cell"];if(l!==void 0)return l(ze({header:!0})).slice();const b=U.value.map(h=>{const y=t[`header-cell-${h.name}`],V=y!==void 0?y:d,x=ze({col:h});return V!==void 0?V(x):c(Dl,{key:h.name,props:x},()=>h.label)});if(De.value===!0&&e.grid!==!0)b.unshift(c("th",{class:"q-table--col-auto-width"}," "));else if(we.value===!0){const h=t["header-selection"],y=h!==void 0?h(ze({})):[c($e,{color:e.color,modelValue:lt.value,dark:i.value,dense:e.dense,"onUpdate:modelValue":ot})];b.unshift(c("th",{class:"q-table--col-auto-width"},y))}return[c("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},b)]}function ze(l){return Object.assign(l,{cols:U.value,sort:le,colsMap:_e.value,color:e.color,dark:i.value,dense:e.dense}),we.value===!0&&me(l,"selected",()=>lt.value,ot),l}function ot(l){de.value===!0&&(l=!1),te(M.value.map(m.value),M.value,l)}const xe=f(()=>{const l=[e.iconFirstPage||o.iconSet.table.firstPage,e.iconPrevPage||o.iconSet.table.prevPage,e.iconNextPage||o.iconSet.table.nextPage,e.iconLastPage||o.iconSet.table.lastPage];return o.lang.rtl===!0?l.reverse():l});function Ut(){if(e.hideBottom===!0)return;if(Vt.value===!0){if(e.hideNoData===!0)return;const b=e.loading===!0?e.loadingLabel||o.lang.table.loading:e.filter?e.noResultsLabel||o.lang.table.noResults:e.noDataLabel||o.lang.table.noData,h=t["no-data"],y=h!==void 0?[h({message:b,icon:o.iconSet.table.warning,filter:e.filter})]:[c(H,{class:"q-table__bottom-nodata-icon",name:o.iconSet.table.warning}),b];return c("div",{class:Oe+" q-table__bottom--nodata"},y)}const l=t.bottom;if(l!==void 0)return c("div",{class:Oe},[l(oe.value)]);const d=e.hideSelectedBanner!==!0&&$.value===!0&&I.value>0?[c("div",{class:"q-table__control"},[c("div",[(e.selectedRowsLabel||o.lang.table.selectedRecords)(I.value)])])]:[];if(e.hidePagination!==!0)return c("div",{class:Oe+" justify-end"},zt(d));if(d.length!==0)return c("div",{class:Oe},d)}function jt(l){Q({page:1,rowsPerPage:l.value})}function zt(l){let d;const{rowsPerPage:b}=w.value,h=e.paginationLabel||o.lang.table.pagination,y=t.pagination,V=e.rowsPerPageOptions.length>1;if(l.push(c("div",{class:"q-table__separator col"})),V===!0&&l.push(c("div",{class:"q-table__control"},[c("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||o.lang.table.recordsPerPage]),c(pt,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:b,options:Rt.value,displayValue:b===0?o.lang.table.allRows:b,dark:i.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":jt})])),y!==void 0)d=y(oe.value);else if(d=[c("span",b!==0?{class:"q-table__bottom-item"}:{},[b?h(Pe.value+1,Math.min(ke.value,pe.value),pe.value):h(1,ee.value,pe.value)])],b!==0&&qe.value>1){const x={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(x.size="sm"),qe.value>2&&d.push(c(B,{key:"pgFirst",...x,icon:xe.value[0],disable:Qe.value,"aria-label":o.lang.pagination.first,onClick:Ne})),d.push(c(B,{key:"pgPrev",...x,icon:xe.value[1],disable:Qe.value,"aria-label":o.lang.pagination.prev,onClick:Le}),c(B,{key:"pgNext",...x,icon:xe.value[2],disable:Ee.value,"aria-label":o.lang.pagination.next,onClick:Me})),qe.value>2&&d.push(c(B,{key:"pgLast",...x,icon:xe.value[3],disable:Ee.value,"aria-label":o.lang.pagination.last,onClick:Ue}))}return l.push(c("div",{class:"q-table__control"},d)),l}function Ht(){const l=e.gridHeader===!0?[c("table",{class:"q-table"},[at()])]:e.loading===!0&&t.loading===void 0?Je():void 0;return c("div",{class:"q-table__middle"},l)}function $t(){const l=t.item!==void 0?t.item:d=>{const b=d.cols.map(y=>c("div",{class:"q-table__grid-item-row"},[c("div",{class:"q-table__grid-item-title"},[y.label]),c("div",{class:"q-table__grid-item-value"},[y.value])]));if($.value===!0){const y=t["body-selection"],V=y!==void 0?y(d):[c($e,{modelValue:d.selected,color:e.color,dark:i.value,dense:e.dense,"onUpdate:modelValue":(x,j)=>{te([d.key],[d.row],x,j)}})];b.unshift(c("div",{class:"q-table__grid-item-row"},V),c(kt,{dark:i.value}))}const h={class:["q-table__grid-item-card"+P.value,e.cardClass],style:e.cardStyle};if(e.cardStyleFn!==void 0&&(h.style=[h.style,e.cardStyleFn(d.row)]),e.cardClassFn!==void 0){const y=e.cardClassFn(d.row);y&&(h.class[0]+=` ${y}`)}return(e.onRowClick!==void 0||e.onRowDblclick!==void 0||e.onRowContextmenu!==void 0)&&(h.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(h.onClick=y=>{r("RowClick",y,d.row,d.pageIndex)}),e.onRowDblclick!==void 0&&(h.onDblclick=y=>{r("RowDblclick",y,d.row,d.pageIndex)}),e.onRowContextmenu!==void 0&&(h.onContextmenu=y=>{r("rowContextmenu",y,d.row,d.pageIndex)})),c("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(d.selected===!0?" q-table__grid-item--selected":"")},[c("div",h,b)])};return c("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},M.value.map((d,b)=>l(tt({key:m.value(d),row:d,pageIndex:b}))))}return Object.assign(g.proxy,{requestServerInteraction:D,setPagination:Q,firstPage:Ne,prevPage:Le,nextPage:Me,lastPage:Ue,isRowSelected:ve,clearSelection:Ae,isRowExpanded:p,setExpanded:J,sort:le,resetVirtualScroll:Ot,scrollTo:Bt,getCellValue:ae}),cl(g.proxy,{filteredSortedRows:()=>ce.value,computedRows:()=>M.value,computedRowsNumber:()=>pe.value}),()=>{const l=[Lt()],d={ref:S,class:q.value};return e.grid===!0?l.push(Ht()):Object.assign(d,{class:[d.class,e.cardClass],style:e.cardStyle}),l.push(Dt(),Ut()),e.loading===!0&&t.loading!==void 0&&l.push(t.loading()),c("div",d,l)}}}),aa={name:"UsuariosPage",data(){return{users:[],user:{},userDialog:!1,loading:!1,filter:"",roles:["Administrador","Soporte","Operador","Cliente"],columns:[{name:"actions",label:"Acciones",align:"center"},{name:"avatar",label:"Avatar",align:"left",field:e=>e.avatar},{name:"name",label:"Nombre",align:"left",field:"name"},{name:"username",label:"Usuario",align:"left",field:"username"},{name:"email",label:"Email",align:"left",field:"email"},{name:"role",label:"Rol",align:"left",field:"role"},{name:"permissions",label:"Permisos",align:"left",field:e=>(e.permissions||[]).map(t=>t.name).join(", ")}],permissions:[],dialogPermisos:!1,permFilter:"",cambioAvatarDialogo:!1}},mounted(){this.usersGet()},computed:{filteredPermissions(){if(!this.permFilter)return this.permissions;const e=this.permFilter.toLowerCase();return this.permissions.filter(t=>t.name.toLowerCase().includes(e))}},methods:{req(e){return!!e||"Campo requerido"},imgUser(e){return`${this.$url}../../images/${e}`},userNew(){this.user={name:"",username:"",email:"",password:"",role:"Cliente"},this.userDialog=!0},userEdit(e){this.user={...e},this.userDialog=!0},usersGet(){this.loading=!0,this.$axios.get("users").then(e=>{this.users=e.data}).catch(e=>this.$alert.error(e.response?.data?.message||"Error cargando usuarios")).finally(()=>{this.loading=!1})},userPost(){this.loading=!0,this.$axios.post("users",this.user).then(()=>{this.userDialog=!1,this.$alert.success("Usuario creado"),this.usersGet()}).catch(e=>this.$alert.error(e.response?.data?.message||"No se pudo crear")).finally(()=>{this.loading=!1})},userPut(){this.loading=!0,this.$axios.put(`users/${this.user.id}`,this.user).then(()=>{this.userDialog=!1,this.$alert.success("Usuario actualizado"),this.usersGet()}).catch(e=>this.$alert.error(e.response?.data?.message||"No se pudo actualizar")).finally(()=>{this.loading=!1})},userDelete(e){this.$alert.dialog("¿Desea eliminar el usuario?").onOk(()=>{this.loading=!0,this.$axios.delete(`users/${e}`).then(()=>{this.$alert.success("Usuario eliminado"),this.usersGet()}).catch(t=>this.$alert.error(t.response?.data?.message||"No se pudo eliminar")).finally(()=>{this.loading=!1})})},userEditPassword(e){this.user={...e},this.$alert.dialogPrompt("Nueva contraseña","Ingrese la nueva contraseña","password").onOk(t=>{this.loading=!0,this.$axios.put(`updatePassword/${e.id}`,{password:t}).then(()=>{this.$alert.success("Contraseña actualizada"),this.usersGet()}).catch(r=>this.$alert.error(r.response?.data?.message||"No se pudo actualizar")).finally(()=>{this.loading=!1})})},cambiarAvatar(e){this.user={...e},this.cambioAvatarDialogo=!0},onFileChange(e){const t=e.target.files[0];if(!t)return;const r=new FormData;r.append("avatar",t),this.loading=!0,this.$axios.post(`${this.user.id}/avatar`,r,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{this.cambioAvatarDialogo=!1,this.$alert.success("Avatar actualizado"),this.usersGet()}).catch(g=>this.$alert.error(g.response?.data?.message||"No se pudo subir avatar")).finally(()=>{this.loading=!1})},async permisosShow(e){this.user={...e},this.dialogPermisos=!0,this.loading=!0;try{const t=await this.$axios.get("permissions").then(g=>g.data),r=await this.$axios.get(`users/${e.id}/permissions`).then(g=>g.data);this.permissions=t.map(g=>({...g,checked:r.includes(g.id)}))}catch(t){this.$alert.error(t.response?.data?.message||"Error cargando permisos")}finally{this.loading=!1}},async permisosPost(){this.loading=!0;try{const e=this.permissions.filter(t=>t.checked).map(t=>t.id);await this.$axios.put(`users/${this.user.id}/permissions`,{permissions:e}),this.dialogPermisos=!1,this.$alert.success("Permisos actualizados"),this.usersGet()}catch(e){this.$alert.error(e.response?.data?.message||"No se pudo guardar permisos")}finally{this.loading=!1}}}},oa={class:"row items-center q-col-gutter-xs"},ra={class:"text-left"},sa={class:"text-subtitle1 text-weight-bold"},na={class:"row justify-end q-gutter-sm"},ia={class:"row items-start q-col-gutter-md"},ua={class:"col-12"},ca={class:"avatar-box"},da=["src"],va={key:1,class:"row items-center justify-center avatar-img"},fa={class:"row justify-end q-gutter-sm q-mt-md"};function ma(e,t,r,g,o,i){return F(),E(Fl,{class:"q-pa-md"},{default:v(()=>[s(Ve,{flat:"",bordered:"",class:"q-mb-md"},{default:v(()=>[s(Y,{class:"row items-center"},{default:v(()=>[t[19]||(t[19]=N("div",null,[N("div",{class:"text-h6 text-title"},"Usuarios"),N("div",{class:"text-caption text-grey-7"},"Gestión de usuarios, roles, permisos y avatar")],-1)),s(Re),s(re,{modelValue:o.filter,"onUpdate:modelValue":t[0]||(t[0]=a=>o.filter=a),label:"Buscar",dense:"",outlined:"",debounce:"300",style:{width:"280px"}},{append:v(()=>[s(H,{name:"search"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),s(la,{rows:o.users,columns:o.columns,"row-key":"id",dense:"",flat:"",bordered:"","wrap-cells":"",filter:o.filter,"rows-per-page-options":[0],"loading-label":"Cargando...","no-data-label":"Sin registros"},{"top-right":v(()=>[s(B,{color:"positive",label:"Nuevo","no-caps":"",icon:"add_circle_outline",loading:o.loading,class:"q-mr-sm",onClick:i.userNew},null,8,["loading","onClick"]),s(B,{color:"primary",label:"Actualizar","no-caps":"",icon:"refresh",loading:o.loading,onClick:i.usersGet},null,8,["loading","onClick"])]),"body-cell-actions":v(a=>[s(Fe,{props:a,class:"text-center"},{default:v(()=>[s(_l,{label:"Opciones","no-caps":"",size:"10px",dense:"",color:"primary"},{default:v(()=>[s(Ze,null,{default:v(()=>[ge((F(),E(ie,{clickable:"",onClick:u=>i.userEdit(a.row)},{default:v(()=>[s(L,{avatar:""},{default:v(()=>[s(H,{name:"edit"})]),_:1}),s(L,null,{default:v(()=>[s(be,null,{default:v(()=>[...t[20]||(t[20]=[z("Editar",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[he]]),ge((F(),E(ie,{clickable:"",onClick:u=>i.userEditPassword(a.row)},{default:v(()=>[s(L,{avatar:""},{default:v(()=>[s(H,{name:"lock_reset"})]),_:1}),s(L,null,{default:v(()=>[s(be,null,{default:v(()=>[...t[21]||(t[21]=[z("Cambiar contraseña",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[he]]),ge((F(),E(ie,{clickable:"",onClick:u=>i.cambiarAvatar(a.row)},{default:v(()=>[s(L,{avatar:""},{default:v(()=>[s(H,{name:"image"})]),_:1}),s(L,null,{default:v(()=>[s(be,null,{default:v(()=>[...t[22]||(t[22]=[z("Cambiar avatar",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[he]]),ge((F(),E(ie,{clickable:"",onClick:u=>i.permisosShow(a.row)},{default:v(()=>[s(L,{avatar:""},{default:v(()=>[s(H,{name:"lock"})]),_:1}),s(L,null,{default:v(()=>[s(be,null,{default:v(()=>[...t[23]||(t[23]=[z("Permisos",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[he]]),s(kt),ge((F(),E(ie,{clickable:"",onClick:u=>i.userDelete(a.row.id)},{default:v(()=>[s(L,{avatar:""},{default:v(()=>[s(H,{name:"delete"})]),_:1}),s(L,null,{default:v(()=>[s(be,null,{default:v(()=>[...t[24]||(t[24]=[z("Eliminar",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[he]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-avatar":v(a=>[s(Fe,{props:a},{default:v(()=>[s(vl,{rounded:"",size:"42px"},{default:v(()=>[a.row.avatar?(F(),E(Pl,{key:0,src:i.imgUser(a.row.avatar)},null,8,["src"])):(F(),E(H,{key:1,name:"person",size:"28px"}))]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-role":v(a=>[s(Fe,{props:a},{default:v(()=>[s(ft,{label:a.row.role,color:e.$filters.color(a.row.role),"text-color":"white",dense:"",size:"13px"},null,8,["label","color"])]),_:2},1032,["props"])]),"body-cell-permissions":v(a=>[s(Fe,{props:a},{default:v(()=>[N("div",oa,[(F(!0),se(Ge,null,We((a.row.permissions||[]).slice(0,3),(u,m)=>(F(),E(ft,{key:u.id||m,dense:"",color:"grey-3","text-color":"black",size:"12px",class:"q-mr-xs q-mb-xs"},{default:v(()=>[z(ne(u.name),1)]),_:2},1024))),128)),(a.row.permissions||[]).length>3?(F(),E(mt,{key:0,outline:"",color:"primary",class:"q-ml-xs"},{default:v(()=>[z(" +"+ne((a.row.permissions||[]).length-3)+" ",1),s(Ol,{anchor:"top middle",self:"bottom middle",offset:[0,8]},{default:v(()=>[N("div",ra,[(F(!0),se(Ge,null,We(a.row.permissions,u=>(F(),se("div",{key:u.id},"• "+ne(u.name),1))),128))])]),_:2},1024)]),_:2},1024)):Ie("",!0),(a.row.permissions||[]).length?Ie("",!0):(F(),E(mt,{key:1,color:"grey-5",outline:""},{default:v(()=>[...t[25]||(t[25]=[z(" Sin permisos ",-1)])]),_:1}))])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"]),s(Ke,{modelValue:o.userDialog,"onUpdate:modelValue":t[9]||(t[9]=a=>o.userDialog=a),persistent:""},{default:v(()=>[s(Ve,{style:{width:"420px","max-width":"95vw"}},{default:v(()=>[s(Y,{class:"row items-center q-pb-none"},{default:v(()=>[N("div",sa,ne(o.user.id?"Editar usuario":"Nuevo usuario"),1),s(Re),s(B,{icon:"close",flat:"",round:"",dense:"",onClick:t[1]||(t[1]=a=>o.userDialog=!1)})]),_:1}),s(Y,{class:"q-pt-sm"},{default:v(()=>[s(Vl,{onSubmit:t[8]||(t[8]=fl(a=>o.user.id?i.userPut():i.userPost(),["prevent"]))},{default:v(()=>[s(re,{modelValue:o.user.name,"onUpdate:modelValue":t[2]||(t[2]=a=>o.user.name=a),label:"Nombre",dense:"",outlined:"",rules:[i.req],class:"q-mb-sm"},null,8,["modelValue","rules"]),s(re,{modelValue:o.user.username,"onUpdate:modelValue":t[3]||(t[3]=a=>o.user.username=a),label:"Usuario",dense:"",outlined:"",rules:[i.req],class:"q-mb-sm"},null,8,["modelValue","rules"]),s(re,{modelValue:o.user.email,"onUpdate:modelValue":t[4]||(t[4]=a=>o.user.email=a),label:"Email",dense:"",outlined:"",type:"email",class:"q-mb-sm"},null,8,["modelValue"]),o.user.id?Ie("",!0):(F(),E(re,{key:0,modelValue:o.user.password,"onUpdate:modelValue":t[5]||(t[5]=a=>o.user.password=a),label:"Contraseña",dense:"",outlined:"",type:"password",rules:[i.req],class:"q-mb-sm"},null,8,["modelValue","rules"])),s(pt,{modelValue:o.user.role,"onUpdate:modelValue":t[6]||(t[6]=a=>o.user.role=a),label:"Rol",dense:"",outlined:"",options:o.roles,rules:[i.req],class:"q-mb-md"},null,8,["modelValue","options","rules"]),N("div",na,[s(B,{color:"negative",label:"Cancelar","no-caps":"",flat:"",onClick:t[7]||(t[7]=a=>o.userDialog=!1),disable:o.loading},null,8,["disable"]),s(B,{color:"primary",label:"Guardar","no-caps":"",type:"submit",loading:o.loading},null,8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(Ke,{modelValue:o.cambioAvatarDialogo,"onUpdate:modelValue":t[14]||(t[14]=a=>o.cambioAvatarDialogo=a),persistent:""},{default:v(()=>[s(Ve,{style:{width:"420px","max-width":"95vw"}},{default:v(()=>[s(Y,{class:"row items-center q-pb-none text-weight-bold"},{default:v(()=>[t[26]||(t[26]=z(" Cambiar avatar ",-1)),s(Re),s(B,{icon:"close",flat:"",round:"",dense:"",onClick:t[10]||(t[10]=a=>o.cambioAvatarDialogo=!1)})]),_:1}),s(Y,{class:"q-pt-sm"},{default:v(()=>[N("div",ia,[N("div",ua,[N("div",ca,[s(B,{icon:"edit",size:"10px",class:"absolute q-mt-sm q-ml-sm",onClick:t[11]||(t[11]=a=>e.$refs.fileInput.click()),dense:"",outline:"",label:"Cambiar foto","no-caps":""}),o.user.avatar?(F(),se("img",{key:0,src:i.imgUser(o.user.avatar),class:"avatar-img"},null,8,da)):(F(),se("div",va,[s(H,{name:"person",size:"88px"})])),N("input",{ref:"fileInput",type:"file",style:{display:"none"},onChange:t[12]||(t[12]=(...a)=>i.onFileChange&&i.onFileChange(...a)),accept:"image/*"},null,544)])])]),N("div",fa,[s(B,{color:"negative",label:"Cancelar","no-caps":"",flat:"",onClick:t[13]||(t[13]=a=>o.cambioAvatarDialogo=!1),disable:o.loading},null,8,["disable"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(Ke,{modelValue:o.dialogPermisos,"onUpdate:modelValue":t[18]||(t[18]=a=>o.dialogPermisos=a),persistent:""},{default:v(()=>[s(Ve,{style:{"min-width":"420px","max-width":"95vw"}},{default:v(()=>[s(Y,{class:"row items-center q-pb-none text-weight-bold"},{default:v(()=>[z(" Permisos de "+ne(o.user.username)+" ",1),s(Re),s(B,{icon:"close",flat:"",round:"",dense:"",onClick:t[15]||(t[15]=a=>o.dialogPermisos=!1)})]),_:1}),s(Y,{class:"q-pt-sm"},{default:v(()=>[s(re,{modelValue:o.permFilter,"onUpdate:modelValue":t[16]||(t[16]=a=>o.permFilter=a),dense:"",outlined:"",placeholder:"Filtrar permisos...",class:"q-mb-sm"},{append:v(()=>[s(H,{name:"search"})]),_:1},8,["modelValue"]),s(Ze,{dense:"",bordered:"",class:"rounded-borders"},{default:v(()=>[(F(!0),se(Ge,null,We(i.filteredPermissions,a=>(F(),E(ie,{key:a.id},{default:v(()=>[s(L,null,{default:v(()=>[z(ne(a.name),1)]),_:2},1024),s(L,{side:""},{default:v(()=>[s(ml,{modelValue:a.checked,"onUpdate:modelValue":u=>a.checked=u},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),s(gl,{align:"right"},{default:v(()=>[s(B,{color:"negative",label:"Cancelar","no-caps":"",flat:"",onClick:t[17]||(t[17]=a=>o.dialogPermisos=!1),disable:o.loading},null,8,["disable"]),s(B,{color:"primary",label:"Guardar","no-caps":"",onClick:i.permisosPost,loading:o.loading},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const pa=dl(aa,[["render",ma],["__scopeId","data-v-165f1fa1"]]);export{pa as default};
