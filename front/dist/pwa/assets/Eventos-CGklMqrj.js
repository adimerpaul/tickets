import{Q as x}from"./QSpace-DtYlMqFV.js";import{z as G,q as H,A as R,K as z,O as M,g as F,l as B,ab as Y,_ as j,af as K,o as f,a as o,w as t,e as m,b as i,ak as n,d as p,U as b,f as u,Q as E,t as c,ad as v,V,c as _,as as D,h as L,at as Q,F as J}from"./index-bi8xWY8A.js";import{Q as C}from"./QSelect-B_HrZ9IO.js";import{e as W,Q as P,b as d,a as y}from"./format-iw1-_RoW.js";import{Q as q,C as w}from"./ClosePopup-C-cEgNA6.js";import{Q as N,a as T}from"./QBtnDropdown-k8qPKB1z.js";import{Q as S,a as k}from"./QTable-BHi4a_Dv.js";import{Q as I}from"./QPagination-Bi-7kLGt.js";import{u as X,a as Z,b as $,c as ee,Q as oe,d as A}from"./use-panel-Bd0VKuay.js";import"./QMarkupTable-DwnECh3G.js";import"./use-fullscreen-iclV61gT.js";import"./QResizeObserver-MYqNJBQW.js";import"./touch-BjYP5sR0.js";const O=G({name:"QTabPanel",props:X,setup(s,{slots:e}){return()=>H("div",{class:"q-tab-panel",role:"tabpanel"},R(e.default))}}),le=G({name:"QTabPanels",props:{...$,...z},emits:Z,setup(s,{slots:e}){const g=F(),U=M(s,g.proxy.$q),{updatePanelsList:l,getPanelContent:r,panelDirectives:a}=ee(),h=B(()=>"q-tab-panels q-panel-parent"+(U.value===!0?" q-tab-panels--dark q-dark":""));return()=>(l(e),Y("div",{class:h.value},r(),"pan",s.swipeable,()=>a.value))}}),ae={name:"EventosPage",data(){return{planes:["Adulto","Niño"],loading:!1,filter:"",filters:{activo:null,search:""},eventos:[],eventosPage:1,eventosPerPage:50,eventosLastPage:1,eventosTotal:0,columns:[{name:"actions",label:"Acciones",align:"center"},{name:"id",label:"ID",align:"left",field:"id",sortable:!0},{name:"nombre",label:"Nombre",align:"left",field:"nombre",sortable:!0},{name:"slug",label:"Slug",align:"left",field:"slug",sortable:!0},{name:"categoria",label:"Categoría",align:"left",field:"categoria"},{name:"ciudad",label:"Ciudad",align:"left",field:"ciudad"},{name:"moneda",label:"Moneda",align:"left",field:"moneda"},{name:"regla",label:"Nacionalidad",align:"left",field:"regla_nacionalidad"},{name:"activo",label:"Estado",align:"left",field:"activo"},{name:"orden",label:"Orden",align:"left",field:"orden",sortable:!0}],eventoDialog:!1,evento:{},tab:"general",horariosLoading:!1,horarios:[],horariosPage:1,horariosPerPage:50,horariosLastPage:1,horariosTotal:0,columnsHorarios:[{name:"actions",label:"Acciones",align:"center"},{name:"id",label:"ID",align:"left",field:"id"},{name:"starts_at",label:"Starts",align:"left",field:"starts_at"},{name:"ends_at",label:"Ends",align:"left",field:"ends_at"},{name:"capacidad",label:"Capacidad",align:"left",field:"capacidad"},{name:"reservados",label:"Reservados",align:"left",field:"reservados"},{name:"precio",label:"Precio",align:"left",field:"precio"},{name:"plan",label:"Plan",align:"left",field:"plan"},{name:"activo",label:"Estado",align:"left",field:"activo"}],horarioDialog:!1,horario:{},loteDialog:!1,lote:{fecha_inicio:"",fecha_fin:"",hora_inicio:"09:00",hora_fin:"17:00",intervalo_min:60,capacidad:100,activo:!0,nota:"",plan:"Adulto",precio:20},activoOptions:[{label:"Activos",value:!0},{label:"Inactivos",value:!1}],reglaOptions:[{label:"Todos",value:"ALL"},{label:"Solo Egipcios",value:"EGYPTIAN_ONLY"},{label:"Solo Extranjeros",value:"FOREIGNERS_ONLY"}]}},mounted(){this.goEventosPage(1)},watch:{"filters.activo"(){this.goEventosPage(1)},"filters.search"(){this.goEventosPage(1)}},methods:{req(s){return!!s||"Campo requerido"},labelRegla(s){return s==="EGYPTIAN_ONLY"?"Solo Egipcios":s==="FOREIGNERS_ONLY"?"Solo Extranjeros":"Todos"},colorRegla(s){return s==="EGYPTIAN_ONLY"?"deep-orange":s==="FOREIGNERS_ONLY"?"indigo":"primary"},slugify(s){return(s||"").toString().trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"")},autoSlug(){this.evento.slug=this.slugify(this.evento.nombre)},buildEventosParams(){const s={page:this.eventosPage,perPage:this.eventosPerPage};return this.filters.activo!==null&&this.filters.activo!==void 0&&(s.activo=this.filters.activo),this.filters.search&&(s.search=this.filters.search),s},goEventosPage(s){this.eventosPage=s,this.eventosGet()},eventosGet(){this.loading=!0,this.$axios.get("eventos",{params:this.buildEventosParams()}).then(s=>{const e=s.data||{};this.eventos=e.data||[],this.eventosPage=e.current_page||1,this.eventosLastPage=e.last_page||1,this.eventosTotal=e.total||0}).catch(s=>this.$alert.error(s.response?.data?.message||"Error cargando eventos")).finally(()=>{this.loading=!1})},eventoNew(){this.evento={nombre:"",slug:"",descripcion:"",pais:"Egypt",ciudad:"",ubicacion:"",lat:null,lng:null,activo:!0,imagen:"",categoria:"",orden:0,regla_nacionalidad:"ALL",moneda:"EGP"},this.tab="general",this.eventoDialog=!0,this.horarios=[],this.horariosPage=1,this.horariosLastPage=1,this.horariosTotal=0},eventoEdit(s){this.evento={...s},this.tab="general",this.eventoDialog=!0,this.horarios=[],this.horariosPage=1,this.horariosLastPage=1,this.horariosTotal=0},eventoManage(s){this.eventoEdit(s),this.tab="horarios",this.horariosGet()},closeEventoDialog(){this.eventoDialog=!1},saveEvento(){if(!this.evento.nombre||!this.evento.slug){this.$alert.error("Nombre y slug son requeridos");return}this.loading=!0;const s={...this.evento};(this.evento.id?this.$axios.put(`eventos/${this.evento.id}`,s):this.$axios.post("eventos",s)).then(g=>{this.evento=g.data,this.$alert.success(this.evento.id?"Evento guardado":"Evento creado"),this.goEventosPage(1)}).catch(g=>this.$alert.error(g.response?.data?.message||"No se pudo guardar")).finally(()=>{this.loading=!1})},toggleActivo(s){this.loading=!0,this.$axios.put(`eventos/${s.id}`,{activo:!s.activo}).then(()=>{this.$alert.success("Estado actualizado"),this.goEventosPage(1)}).catch(e=>this.$alert.error(e.response?.data?.message||"No se pudo actualizar")).finally(()=>{this.loading=!1})},eventoDelete(s){this.$alert.dialog("¿Desea eliminar el evento?").onOk(()=>{this.loading=!0,this.$axios.delete(`eventos/${s}`).then(()=>{this.$alert.success("Evento eliminado"),this.goEventosPage(1)}).catch(e=>this.$alert.error(e.response?.data?.message||"No se pudo eliminar")).finally(()=>{this.loading=!1})})},onTabChanged(){this.tab==="horarios"&&this.evento?.id&&this.horariosGet()},buildHorariosParams(){return{page:this.horariosPage,perPage:this.horariosPerPage}},goHorariosPage(s){this.horariosPage=s,this.horariosGet()},horariosGet(){this.evento?.id&&(this.horariosLoading=!0,this.$axios.get(`eventos/${this.evento.id}/horarios`,{params:this.buildHorariosParams()}).then(s=>{const e=s.data||{};this.horarios=e.data||[],this.horariosPage=e.current_page||1,this.horariosLastPage=e.last_page||1,this.horariosTotal=e.total||0}).catch(s=>this.$alert.error(s.response?.data?.message||"Error cargando horarios")).finally(()=>{this.horariosLoading=!1}))},openLoteDialog(){this.lote.fecha_inicio||(this.lote.fecha_inicio=new Date().toISOString().slice(0,10)),this.lote.fecha_fin||(this.lote.fecha_fin=this.lote.fecha_inicio),this.loteDialog=!0},horariosCreateLote(){if(this.evento?.id){if(!this.lote.fecha_inicio||!this.lote.fecha_fin){this.$alert.error("Selecciona fecha inicio y fecha fin");return}if(!this.lote.hora_inicio||!this.lote.hora_fin){this.$alert.error("Selecciona hora inicio y hora fin");return}this.loading=!0,this.$axios.post(`eventos/${this.evento.id}/horarios/lote`,{...this.lote}).then(s=>{this.$alert.success(`Horarios creados: ${s.data?.created||0}`),this.loteDialog=!1,this.goHorariosPage(1)}).catch(s=>this.$alert.error(s.response?.data?.message||"No se pudo crear horarios")).finally(()=>{this.loading=!1})}},horarioEdit(s){this.horario={...s},this.horarioDialog=!0},horarioToggle(s){this.loading=!0,this.$axios.put(`evento-horarios/${s.id}`,{activo:!s.activo}).then(e=>{const g=this.horarios.findIndex(U=>U.id===s.id);g!==-1&&this.horarios.splice(g,1,e.data),this.$alert.success("Horario actualizado")}).catch(e=>this.$alert.error(e.response?.data?.message||"No se pudo actualizar")).finally(()=>{this.loading=!1})},horarioSave(){this.horario?.id&&(this.loading=!0,this.$axios.put(`evento-horarios/${this.horario.id}`,{...this.horario}).then(s=>{const e=this.horarios.findIndex(g=>g.id===this.horario.id);e!==-1&&this.horarios.splice(e,1,s.data),this.horarioDialog=!1,this.$alert.success("Horario guardado")}).catch(s=>this.$alert.error(s.response?.data?.message||"No se pudo guardar")).finally(()=>{this.loading=!1}))},horarioDelete(s){this.$alert.dialog("¿Eliminar horario?").onOk(()=>{this.loading=!0,this.$axios.delete(`evento-horarios/${s}`).then(()=>{this.$alert.success("Horario eliminado"),this.horariosGet()}).catch(e=>this.$alert.error(e.response?.data?.message||"No se pudo eliminar")).finally(()=>{this.loading=!1})})}}},te={class:"col-12 col-md-3"},ie={class:"col-12 col-md-5"},se={class:"col-12 col-md-4 row justify-end q-gutter-sm"},ne={class:"text-caption text-grey-7"},re={class:"col-12 col-sm-auto"},de={class:"col-12 col-sm"},ue={class:"text-h6 text-weight-bold"},me={class:"row q-col-gutter-md"},ce={class:"col-12 col-md-6"},ge={class:"col-12 col-md-6"},ve={class:"col-12"},he={class:"col-12 col-md-3"},fe={class:"col-12 col-md-3"},pe={class:"col-12 col-md-6"},be={class:"col-12 col-md-3"},Ve={class:"col-12 col-md-3"},_e={class:"col-12 col-md-3"},Pe={class:"col-12 col-md-3"},ye={class:"col-12 col-md-3"},we={class:"col-12 col-md-3"},xe={class:"col-12 col-md-6"},Ce={class:"col-12 col-md-3"},Ee={class:"row justify-end q-gutter-sm q-mt-md"},ke={class:"row items-center q-gutter-sm q-mb-sm"},Ue={class:"row items-center q-col-gutter-md q-mt-md"},De={class:"col-12 col-sm-auto"},Le={class:"col-12 col-sm"},Qe={class:"col-12 col-sm-auto text-caption text-grey-7"},qe={class:"row q-col-gutter-md"},Ne={class:"col-12 col-md-6"},Te={class:"col-12 col-md-3"},Se={class:"col-12 col-md-3"},Ie={class:"col-12 col-md-6"},Ae={class:"col-12 col-md-6"},Oe={class:"col-12 col-md-6"},Ge={class:"col-12 col-md-6"},He={class:"col-12 col-md-6"},Re={class:"col-12 col-md-6"},ze={class:"col-12"},Me={class:"col-12"},Fe={class:"row q-col-gutter-md"},Be={class:"col-12 col-md-6"},Ye={class:"col-12 col-md-6"},je={class:"col-12 col-md-4"},Ke={class:"col-12 col-md-4"},Je={class:"col-12 col-md-4"},We={class:"col-12 col-md-4"},Xe={class:"col-12 col-md-4"},Ze={class:"col-12 col-md-4"},$e={class:"col-12 col-md-4"},eo={class:"col-12"};function oo(s,e,g,U,l,r){return f(),K(J,null,[o(E,{flat:"",bordered:"",class:"q-mb-md"},{default:t(()=>[o(m,{class:"row items-center"},{default:t(()=>[e[54]||(e[54]=i("div",null,[i("div",{class:"text-h6 text-weight-bold"},"Eventos"),i("div",{class:"text-caption text-grey-7"},"Gestión de eventos y horarios")],-1)),o(x),o(n,{modelValue:l.filter,"onUpdate:modelValue":e[0]||(e[0]=a=>l.filter=a),dense:"",outlined:"",debounce:"300",label:"Buscar...",style:{width:"320px"}},{append:t(()=>[o(p,{name:"search"})]),_:1},8,["modelValue"])]),_:1}),o(b),o(m,{class:"row items-center q-col-gutter-sm"},{default:t(()=>[i("div",te,[o(C,{modelValue:l.filters.activo,"onUpdate:modelValue":e[1]||(e[1]=a=>l.filters.activo=a),dense:"",outlined:"",label:"Estado",options:l.activoOptions,"emit-value":"","map-options":"",clearable:""},null,8,["modelValue","options"])]),i("div",ie,[o(n,{modelValue:l.filters.search,"onUpdate:modelValue":e[2]||(e[2]=a=>l.filters.search=a),dense:"",outlined:"",label:"Buscar (nombre/slug/ciudad)",debounce:"300"},null,8,["modelValue"])]),i("div",se,[o(u,{color:"positive","no-caps":"",icon:"add_circle_outline",label:"Nuevo evento",loading:l.loading,onClick:r.eventoNew},null,8,["loading","onClick"]),o(u,{color:"primary","no-caps":"",icon:"refresh",label:"Actualizar",loading:l.loading,onClick:e[3]||(e[3]=a=>r.goEventosPage(1))},null,8,["loading"])])]),_:1})]),_:1}),o(E,{flat:"",bordered:""},{default:t(()=>[o(m,{class:"row items-center"},{default:t(()=>[e[55]||(e[55]=i("div",{class:"text-subtitle1 text-weight-bold"},"Listado",-1)),o(x),i("div",ne," Total: "+c(l.eventosTotal)+" | Página "+c(l.eventosPage)+" / "+c(l.eventosLastPage),1)]),_:1}),o(b),o(m,{class:"q-pa-none"},{default:t(()=>[o(S,{rows:l.eventos,columns:l.columns,"row-key":"id",dense:"",flat:"",bordered:"","wrap-cells":"",filter:l.filter,"rows-per-page-options":[0],"loading-label":"Cargando...","no-data-label":"Sin eventos",loading:l.loading},{"body-cell-actions":t(a=>[o(k,{props:a,class:"text-center"},{default:t(()=>[o(T,{label:"Opciones","no-caps":"",dense:"",color:"primary",size:"10px"},{default:t(()=>[o(q,null,{default:t(()=>[V((f(),_(P,{clickable:"",onClick:h=>r.eventoManage(a.row)},{default:t(()=>[o(d,{avatar:""},{default:t(()=>[o(p,{name:"schedule"})]),_:1}),o(d,null,{default:t(()=>[o(y,null,{default:t(()=>[...e[56]||(e[56]=[v("Administrar horarios",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[w]]),V((f(),_(P,{clickable:"",onClick:h=>r.eventoEdit(a.row)},{default:t(()=>[o(d,{avatar:""},{default:t(()=>[o(p,{name:"edit"})]),_:1}),o(d,null,{default:t(()=>[o(y,null,{default:t(()=>[...e[57]||(e[57]=[v("Editar",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[w]]),V((f(),_(P,{clickable:"",onClick:h=>r.toggleActivo(a.row)},{default:t(()=>[o(d,{avatar:""},{default:t(()=>[o(p,{name:a.row.activo?"toggle_off":"toggle_on"},null,8,["name"])]),_:2},1024),o(d,null,{default:t(()=>[o(y,null,{default:t(()=>[v(c(a.row.activo?"Desactivar":"Activar"),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[w]]),o(b),V((f(),_(P,{clickable:"",onClick:h=>r.eventoDelete(a.row.id)},{default:t(()=>[o(d,{avatar:""},{default:t(()=>[o(p,{name:"delete"})]),_:1}),o(d,null,{default:t(()=>[o(y,null,{default:t(()=>[...e[58]||(e[58]=[v("Eliminar",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[w]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-activo":t(a=>[o(k,{props:a},{default:t(()=>[o(N,{color:a.row.activo?"positive":"grey-6","text-color":"white",class:"text-weight-bold"},{default:t(()=>[v(c(a.row.activo?"Activo":"Inactivo"),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell_regla":t(a=>[o(k,{props:a},{default:t(()=>[o(W,{dense:"",color:r.colorRegla(a.row.regla_nacionalidad),"text-color":"white",size:"12px"},{default:t(()=>[v(c(r.labelRegla(a.row.regla_nacionalidad)),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","loading"])]),_:1}),o(b),o(m,{class:"row items-center q-col-gutter-md"},{default:t(()=>[i("div",re,[o(C,{modelValue:l.eventosPerPage,"onUpdate:modelValue":[e[4]||(e[4]=a=>l.eventosPerPage=a),e[5]||(e[5]=a=>r.goEventosPage(1))],dense:"",outlined:"",style:{width:"140px"},label:"Por página",options:[25,50,100]},null,8,["modelValue"])]),i("div",de,[o(I,{modelValue:l.eventosPage,"onUpdate:modelValue":[e[6]||(e[6]=a=>l.eventosPage=a),r.goEventosPage],max:l.eventosLastPage,"max-pages":"8","boundary-numbers":"","direction-links":""},null,8,["modelValue","max","onUpdate:modelValue"])])]),_:1})]),_:1}),o(L,{modelValue:l.eventoDialog,"onUpdate:modelValue":e[53]||(e[53]=a=>l.eventoDialog=a),persistent:"",maximized:""},{default:t(()=>[o(E,{class:"column"},{default:t(()=>[o(m,{class:"row items-center"},{default:t(()=>[i("div",null,[i("div",ue,c(l.evento.id?"Evento: "+l.evento.nombre:"Nuevo evento"),1),e[59]||(e[59]=i("div",{class:"text-caption text-grey-7"},"Configura información general y horarios.",-1))]),o(x),o(u,{icon:"close",flat:"",round:"",dense:"",onClick:r.closeEventoDialog},null,8,["onClick"])]),_:1}),o(b),o(m,{class:"q-pa-none"},{default:t(()=>[o(oe,{modelValue:l.tab,"onUpdate:modelValue":e[7]||(e[7]=a=>l.tab=a),dense:"","active-color":"primary","indicator-color":"primary",align:"left",class:"bg-grey-1"},{default:t(()=>[o(A,{name:"general",icon:"info",label:"General"}),o(A,{name:"horarios",icon:"schedule",label:"Horarios",disable:!l.evento.id},null,8,["disable"])]),_:1},8,["modelValue"])]),_:1}),o(b),o(m,{class:"q-pa-md col"},{default:t(()=>[o(le,{modelValue:l.tab,"onUpdate:modelValue":e[52]||(e[52]=a=>l.tab=a),animated:"",onTransition:r.onTabChanged},{default:t(()=>[o(O,{name:"general"},{default:t(()=>[i("div",me,[i("div",ce,[o(n,{modelValue:l.evento.nombre,"onUpdate:modelValue":e[8]||(e[8]=a=>l.evento.nombre=a),dense:"",outlined:"",label:"Nombre",rules:[r.req]},null,8,["modelValue","rules"])]),i("div",ge,[o(n,{modelValue:l.evento.slug,"onUpdate:modelValue":e[9]||(e[9]=a=>l.evento.slug=a),dense:"",outlined:"",label:"Slug (para /evento/:site)",hint:"Ej: giza-plateau",rules:[r.req]},{append:t(()=>[o(u,{flat:"",dense:"",icon:"auto_fix_high",onClick:r.autoSlug,disable:!l.evento.nombre},null,8,["onClick","disable"])]),_:1},8,["modelValue","rules"])]),i("div",ve,[o(n,{modelValue:l.evento.descripcion,"onUpdate:modelValue":e[10]||(e[10]=a=>l.evento.descripcion=a),type:"textarea",autogrow:"",dense:"",outlined:"",label:"Descripción"},null,8,["modelValue"])]),i("div",he,[o(n,{modelValue:l.evento.pais,"onUpdate:modelValue":e[11]||(e[11]=a=>l.evento.pais=a),dense:"",outlined:"",label:"País"},null,8,["modelValue"])]),i("div",fe,[o(n,{modelValue:l.evento.ciudad,"onUpdate:modelValue":e[12]||(e[12]=a=>l.evento.ciudad=a),dense:"",outlined:"",label:"Ciudad"},null,8,["modelValue"])]),i("div",pe,[o(n,{modelValue:l.evento.ubicacion,"onUpdate:modelValue":e[13]||(e[13]=a=>l.evento.ubicacion=a),dense:"",outlined:"",label:"Ubicación / Dirección"},null,8,["modelValue"])]),i("div",be,[o(n,{modelValue:l.evento.lat,"onUpdate:modelValue":e[14]||(e[14]=a=>l.evento.lat=a),modelModifiers:{number:!0},dense:"",outlined:"",label:"Latitud",type:"number"},null,8,["modelValue"])]),i("div",Ve,[o(n,{modelValue:l.evento.lng,"onUpdate:modelValue":e[15]||(e[15]=a=>l.evento.lng=a),modelModifiers:{number:!0},dense:"",outlined:"",label:"Longitud",type:"number"},null,8,["modelValue"])]),i("div",_e,[o(n,{modelValue:l.evento.categoria,"onUpdate:modelValue":e[16]||(e[16]=a=>l.evento.categoria=a),dense:"",outlined:"",label:"Categoría"},null,8,["modelValue"])]),i("div",Pe,[o(n,{modelValue:l.evento.orden,"onUpdate:modelValue":e[17]||(e[17]=a=>l.evento.orden=a),modelModifiers:{number:!0},dense:"",outlined:"",label:"Orden",type:"number"},null,8,["modelValue"])]),i("div",ye,[o(C,{modelValue:l.evento.regla_nacionalidad,"onUpdate:modelValue":e[18]||(e[18]=a=>l.evento.regla_nacionalidad=a),dense:"",outlined:"",label:"Regla de nacionalidad",options:l.reglaOptions,"emit-value":"","map-options":""},null,8,["modelValue","options"])]),i("div",we,[o(n,{modelValue:l.evento.moneda,"onUpdate:modelValue":e[19]||(e[19]=a=>l.evento.moneda=a),dense:"",outlined:"",label:"Moneda"},null,8,["modelValue"])]),i("div",xe,[o(n,{modelValue:l.evento.imagen,"onUpdate:modelValue":e[20]||(e[20]=a=>l.evento.imagen=a),dense:"",outlined:"",label:"Imagen (URL / path)"},null,8,["modelValue"])]),i("div",Ce,[o(D,{modelValue:l.evento.activo,"onUpdate:modelValue":e[21]||(e[21]=a=>l.evento.activo=a),label:"Evento activo"},null,8,["modelValue"])])]),i("div",Ee,[o(u,{color:"negative","no-caps":"",flat:"",label:"Cancelar",onClick:r.closeEventoDialog,disable:l.loading},null,8,["onClick","disable"]),o(u,{color:"primary","no-caps":"",label:l.evento.id?"Guardar cambios":"Crear evento",loading:l.loading,onClick:r.saveEvento},null,8,["label","loading","onClick"])])]),_:1}),o(O,{name:"horarios"},{default:t(()=>[i("div",ke,[e[60]||(e[60]=i("div",{class:"text-subtitle1 text-weight-bold"},"Horarios",-1)),o(x),o(u,{color:"primary","no-caps":"",icon:"add_circle_outline",label:"Crear horarios (lote)",onClick:r.openLoteDialog},null,8,["onClick"])]),o(S,{rows:l.horarios,columns:l.columnsHorarios,"row-key":"id",dense:"",flat:"",bordered:"","rows-per-page-options":[0],"no-data-label":"Sin horarios",loading:l.horariosLoading},{"body-cell-actions":t(a=>[o(k,{props:a,class:"text-center"},{default:t(()=>[o(T,{"no-caps":"",dense:"",size:"10px",color:"primary",label:"Opciones"},{default:t(()=>[o(q,null,{default:t(()=>[V((f(),_(P,{clickable:"",onClick:h=>r.horarioEdit(a.row)},{default:t(()=>[o(d,{avatar:""},{default:t(()=>[o(p,{name:"edit"})]),_:1}),o(d,null,{default:t(()=>[o(y,null,{default:t(()=>[...e[61]||(e[61]=[v("Editar",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[w]]),V((f(),_(P,{clickable:"",onClick:h=>r.horarioToggle(a.row)},{default:t(()=>[o(d,{avatar:""},{default:t(()=>[o(p,{name:"toggle_on"})]),_:1}),o(d,null,{default:t(()=>[o(y,null,{default:t(()=>[v(c(a.row.activo?"Desactivar":"Activar"),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[w]]),o(b),V((f(),_(P,{clickable:"",onClick:h=>r.horarioDelete(a.row.id)},{default:t(()=>[o(d,{avatar:""},{default:t(()=>[o(p,{name:"delete"})]),_:1}),o(d,null,{default:t(()=>[o(y,null,{default:t(()=>[...e[62]||(e[62]=[v("Eliminar",-1)])]),_:1})]),_:1})]),_:1},8,["onClick"])),[[w]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-activo":t(a=>[o(k,{props:a},{default:t(()=>[o(N,{color:a.row.activo?"positive":"grey-6","text-color":"white"},{default:t(()=>[v(c(a.row.activo?"Activo":"Inactivo"),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"]),i("div",Ue,[i("div",De,[o(C,{modelValue:l.horariosPerPage,"onUpdate:modelValue":[e[22]||(e[22]=a=>l.horariosPerPage=a),e[23]||(e[23]=a=>r.goHorariosPage(1))],dense:"",outlined:"",style:{width:"140px"},label:"Por página",options:[25,50,100]},null,8,["modelValue"])]),i("div",Le,[o(I,{modelValue:l.horariosPage,"onUpdate:modelValue":[e[24]||(e[24]=a=>l.horariosPage=a),r.goHorariosPage],max:l.horariosLastPage,"max-pages":"8","boundary-numbers":"","direction-links":""},null,8,["modelValue","max","onUpdate:modelValue"])]),i("div",Qe," Total: "+c(l.horariosTotal)+" | Página "+c(l.horariosPage)+" / "+c(l.horariosLastPage),1)]),o(L,{modelValue:l.horarioDialog,"onUpdate:modelValue":e[38]||(e[38]=a=>l.horarioDialog=a),persistent:""},{default:t(()=>[o(E,{style:{width:"520px","max-width":"95vw"}},{default:t(()=>[o(m,{class:"row items-center q-pb-none"},{default:t(()=>[e[63]||(e[63]=i("div",{class:"text-subtitle1 text-weight-bold"},"Editar horario",-1)),o(x),o(u,{icon:"close",flat:"",round:"",dense:"",onClick:e[25]||(e[25]=a=>l.horarioDialog=!1)})]),_:1}),o(m,{class:"q-pt-sm"},{default:t(()=>[i("div",qe,[i("div",Ne,[o(n,{modelValue:l.horario.fecha,"onUpdate:modelValue":e[26]||(e[26]=a=>l.horario.fecha=a),dense:"",outlined:"",label:"Fecha",type:"date"},null,8,["modelValue"])]),i("div",Te,[o(n,{modelValue:l.horario.hora_inicio,"onUpdate:modelValue":e[27]||(e[27]=a=>l.horario.hora_inicio=a),dense:"",outlined:"",label:"Inicio",type:"time"},null,8,["modelValue"])]),i("div",Se,[o(n,{modelValue:l.horario.hora_fin,"onUpdate:modelValue":e[28]||(e[28]=a=>l.horario.hora_fin=a),dense:"",outlined:"",label:"Fin",type:"time"},null,8,["modelValue"])]),i("div",Ie,[o(n,{modelValue:l.horario.starts_at,"onUpdate:modelValue":e[29]||(e[29]=a=>l.horario.starts_at=a),dense:"",outlined:"",label:"Starts",type:"datetime-local"},null,8,["modelValue"])]),i("div",Ae,[o(n,{modelValue:l.horario.ends_at,"onUpdate:modelValue":e[30]||(e[30]=a=>l.horario.ends_at=a),dense:"",outlined:"",label:"Ends",type:"datetime-local"},null,8,["modelValue"])]),i("div",Oe,[o(n,{modelValue:l.horario.capacidad,"onUpdate:modelValue":e[31]||(e[31]=a=>l.horario.capacidad=a),modelModifiers:{number:!0},dense:"",outlined:"",label:"Capacidad",type:"number"},null,8,["modelValue"])]),i("div",Ge,[o(n,{modelValue:l.horario.reservados,"onUpdate:modelValue":e[32]||(e[32]=a=>l.horario.reservados=a),modelModifiers:{number:!0},dense:"",outlined:"",label:"Reservados",type:"number"},null,8,["modelValue"])]),i("div",He,[o(C,{modelValue:l.horario.plan,"onUpdate:modelValue":e[33]||(e[33]=a=>l.horario.plan=a),dense:"",outlined:"",label:"Plan",options:l.planes,clearable:""},null,8,["modelValue","options"])]),i("div",Re,[o(n,{modelValue:l.horario.precio,"onUpdate:modelValue":e[34]||(e[34]=a=>l.horario.precio=a),modelModifiers:{number:!0},dense:"",outlined:"",label:"Precio",type:"number"},null,8,["modelValue"])]),i("div",ze,[o(n,{modelValue:l.horario.nota,"onUpdate:modelValue":e[35]||(e[35]=a=>l.horario.nota=a),dense:"",outlined:"",label:"Nota"},null,8,["modelValue"])]),i("div",Me,[o(D,{modelValue:l.horario.activo,"onUpdate:modelValue":e[36]||(e[36]=a=>l.horario.activo=a),label:"Horario activo"},null,8,["modelValue"])])])]),_:1}),o(Q,{align:"right"},{default:t(()=>[o(u,{color:"negative","no-caps":"",flat:"",label:"Cancelar",onClick:e[37]||(e[37]=a=>l.horarioDialog=!1),disable:l.loading},null,8,["disable"]),o(u,{color:"primary","no-caps":"",label:"Guardar",loading:l.loading,onClick:r.horarioSave},null,8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(L,{modelValue:l.loteDialog,"onUpdate:modelValue":e[51]||(e[51]=a=>l.loteDialog=a),persistent:""},{default:t(()=>[o(E,{style:{width:"640px","max-width":"95vw"}},{default:t(()=>[o(m,{class:"row items-center q-pb-none"},{default:t(()=>[e[64]||(e[64]=i("div",{class:"text-subtitle1 text-weight-bold"},"Crear horarios en lote",-1)),o(x),o(u,{icon:"close",flat:"",round:"",dense:"",onClick:e[39]||(e[39]=a=>l.loteDialog=!1)})]),_:1}),o(m,{class:"q-pt-sm"},{default:t(()=>[i("div",Fe,[i("div",Be,[o(n,{modelValue:l.lote.fecha_inicio,"onUpdate:modelValue":e[40]||(e[40]=a=>l.lote.fecha_inicio=a),dense:"",outlined:"",label:"Fecha inicio",type:"date"},null,8,["modelValue"])]),i("div",Ye,[o(n,{modelValue:l.lote.fecha_fin,"onUpdate:modelValue":e[41]||(e[41]=a=>l.lote.fecha_fin=a),dense:"",outlined:"",label:"Fecha fin",type:"date"},null,8,["modelValue"])]),i("div",je,[o(n,{modelValue:l.lote.hora_inicio,"onUpdate:modelValue":e[42]||(e[42]=a=>l.lote.hora_inicio=a),dense:"",outlined:"",label:"Hora inicio",type:"time"},null,8,["modelValue"])]),i("div",Ke,[o(n,{modelValue:l.lote.hora_fin,"onUpdate:modelValue":e[43]||(e[43]=a=>l.lote.hora_fin=a),dense:"",outlined:"",label:"Hora fin",type:"time"},null,8,["modelValue"])]),i("div",Je,[o(n,{modelValue:l.lote.intervalo_min,"onUpdate:modelValue":e[44]||(e[44]=a=>l.lote.intervalo_min=a),modelModifiers:{number:!0},dense:"",outlined:"",label:"Intervalo (min)",type:"number"},null,8,["modelValue"])]),i("div",We,[o(n,{modelValue:l.lote.capacidad,"onUpdate:modelValue":e[45]||(e[45]=a=>l.lote.capacidad=a),modelModifiers:{number:!0},dense:"",outlined:"",label:"Capacidad",type:"number"},null,8,["modelValue"])]),i("div",Xe,[o(C,{modelValue:l.lote.plan,"onUpdate:modelValue":e[46]||(e[46]=a=>l.lote.plan=a),dense:"",outlined:"",label:"Plan",options:l.planes,clearable:""},null,8,["modelValue","options"])]),i("div",Ze,[o(n,{modelValue:l.lote.precio,"onUpdate:modelValue":e[47]||(e[47]=a=>l.lote.precio=a),modelModifiers:{number:!0},dense:"",outlined:"",label:"Precio",type:"number"},null,8,["modelValue"])]),i("div",$e,[o(D,{modelValue:l.lote.activo,"onUpdate:modelValue":e[48]||(e[48]=a=>l.lote.activo=a),label:"Activo"},null,8,["modelValue"])]),i("div",eo,[o(n,{modelValue:l.lote.nota,"onUpdate:modelValue":e[49]||(e[49]=a=>l.lote.nota=a),dense:"",outlined:"",label:"Nota (opcional)"},null,8,["modelValue"])])]),e[65]||(e[65]=i("div",{class:"text-caption text-grey-7 q-mt-md"}," Esto crea automáticamente todos los horarios entre las fechas con el intervalo indicado. ",-1))]),_:1}),o(Q,{align:"right"},{default:t(()=>[o(u,{flat:"","no-caps":"",color:"grey-7",label:"Cancelar",onClick:e[50]||(e[50]=a=>l.loteDialog=!1),disable:l.loading},null,8,["disable"]),o(u,{color:"primary","no-caps":"",label:"Crear",loading:l.loading,onClick:r.horariosCreateLote},null,8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","onTransition"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const fo=j(ae,[["render",oo]]);export{fo as default};
