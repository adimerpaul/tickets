import{z as De,l as p,q as b,A as We,K as Mt,g as Ge,O as qt,m as te,aB as Gt,x as $t,E as ea,ab as ta,f as O,ay as aa,aR as St,aS as na,aT as oa,aU as la,r as U,aD as sa,aa as vt,H as _e,aV as ra,aG as ia,h as kt,_ as ua,c as ft,o as Ce,w as S,a as f,b as c,Q as Re,ae as Fe,t as P,d as ce,ak as me,aj as da,ad as Le,af as ht,aW as gt,ai as yt,e as Ue,U as xe,ar as ca,aF as ma,at as va}from"./index-bi8xWY8A.js";import{u as fa,a as ha,b as ga,c as ya,e as ba,Q as pa,d as Ye}from"./use-panel-Bd0VKuay.js";import{Q as G}from"./QSpace-DtYlMqFV.js";import{u as _a,a as xa,b as Da}from"./use-fullscreen-iclV61gT.js";import{k,l as wa,i as Ma,f as qa}from"./format-iw1-_RoW.js";import{Q as Sa}from"./QSelect-B_HrZ9IO.js";import{Q as ka}from"./QBanner-CrP-I7TA.js";import{Q as bt}from"./QImg-ClRWUvRZ.js";import{Q as Ca}from"./QPage-C8XIWktg.js";import{Q as Ya,a as Va}from"./QLayout-Cue8SBks.js";import{Q as Ha}from"./QForm-CaltmsTD.js";import"./QResizeObserver-MYqNJBQW.js";import"./touch-BjYP5sR0.js";const Ta=De({name:"QCarouselSlide",props:{...fa,imgSrc:String},setup(e,{slots:a}){const u=p(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>b("div",{class:"q-carousel__slide",style:u.value},We(a.default))}}),Ia=De({name:"QCarouselControl",props:{position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,default:()=>[18,18],validator:e=>e.length===2}},setup(e,{slots:a}){const u=p(()=>`q-carousel__control absolute absolute-${e.position}`),r=p(()=>({margin:`${e.offset[1]}px ${e.offset[0]}px`}));return()=>b("div",{class:u.value,style:r.value},We(a.default))}}),Oa=["top","right","bottom","left"],Na=["regular","flat","outline","push","unelevated"],Ea=De({name:"QCarousel",props:{...Mt,...ga,...xa,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>Na.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>Oa.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[..._a,...ha],setup(e,{slots:a}){const{proxy:{$q:u}}=Ge(),r=qt(e,u);let o=null,s;const{updatePanelsList:i,getPanelContent:d,panelDirectives:g,goToPanel:M,previousPanel:h,nextPanel:x,getEnabledPanels:B,panelIndex:N}=ya(),{inFullscreen:E}=Da(),C=p(()=>E.value!==!0&&e.height!==void 0?{height:e.height}:{}),q=p(()=>e.vertical===!0?"vertical":"horizontal"),we=p(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),Te=p(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(E.value===!0?" fullscreen":"")+(r.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${q.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${we.value}`:"")),F=p(()=>{const H=[e.prevIcon||u.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||u.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&u.lang.rtl===!0?H.reverse():H}),_=p(()=>e.navigationIcon||u.iconSet.carousel.navigationIcon),A=p(()=>e.navigationActiveIcon||_.value),le=p(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));te(()=>e.modelValue,()=>{e.autoplay&&X()}),te(()=>e.autoplay,H=>{H?X():o!==null&&(clearTimeout(o),o=null)});function X(){const H=Gt(e.autoplay)===!0?Math.abs(e.autoplay):5e3;o!==null&&clearTimeout(o),o=setTimeout(()=>{o=null,H>=0?x():h()},H)}$t(()=>{e.autoplay&&X()}),ea(()=>{o!==null&&clearTimeout(o)});function se(H,T){return b("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${H} q-carousel__navigation--${we.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[b("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},B().map(T))])}function he(){const H=[];if(e.navigation===!0){const T=a["navigation-icon"]!==void 0?a["navigation-icon"]:I=>b(O,{key:"nav"+I.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${I.active===!0?"":"in"}active`,...I.btnProps,onClick:I.onClick}),ge=s-1;H.push(se("buttons",(I,Z)=>{const ne=I.props.name,re=N.value===Z;return T({index:Z,maxIndex:ge,name:ne,active:re,btnProps:{icon:re===!0?A.value:_.value,size:"sm",...le.value},onClick:()=>{M(ne)}})}))}else if(e.thumbnails===!0){const T=e.controlColor!==void 0?` text-${e.controlColor}`:"";H.push(se("thumbnails",ge=>{const I=ge.props;return b("img",{key:"tmb#"+I.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${I.name===e.modelValue?"":"in"}active`+T,src:I.imgSrc||I["img-src"],onClick:()=>{M(I.name)}})}))}return e.arrows===!0&&N.value>=0&&((e.infinite===!0||N.value>0)&&H.push(b("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${q.value} absolute flex flex-center`},[b(O,{icon:F.value[0],...le.value,onClick:h})])),(e.infinite===!0||N.value<s-1)&&H.push(b("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${q.value} absolute flex flex-center`},[b(O,{icon:F.value[1],...le.value,onClick:x})]))),aa(a.control,H)}return()=>(s=i(a),b("div",{class:Te.value,style:C.value},[ta("div",{class:"q-carousel__slides-container"},d(),"sl-cont",e.swipeable,()=>g.value)].concat(he())))}}),ae=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Aa(e,a,u){return Object.prototype.toString.call(e)==="[object Date]"&&(u=e.getDate(),a=e.getMonth()+1,e=e.getFullYear()),Ba($e(e,a,u))}function pt(e,a,u){return Yt(Pa(e,a,u))}function Qa(e){return ja(e)===0}function He(e,a){return a<=6?31:a<=11||Qa(e)?30:29}function ja(e){const a=ae.length;let u=ae[0],r,o,s,i,d;if(e<u||e>=ae[a-1])throw new Error("Invalid Jalaali year "+e);for(d=1;d<a&&(r=ae[d],o=r-u,!(e<r));d+=1)u=r;return i=e-u,o-i<6&&(i=i-o+V(o+4,33)*33),s=R(R(i+1,33)-1,4),s===-1&&(s=4),s}function Ct(e,a){const u=ae.length,r=e+621;let o=-14,s=ae[0],i,d,g,M,h;if(e<s||e>=ae[u-1])throw new Error("Invalid Jalaali year "+e);for(h=1;h<u&&(i=ae[h],d=i-s,!(e<i));h+=1)o=o+V(d,33)*8+V(R(d,33),4),s=i;M=e-s,o=o+V(M,33)*8+V(R(M,33)+3,4),R(d,33)===4&&d-M===4&&(o+=1);const x=V(r,4)-V((V(r,100)+1)*3,4)-150,B=20+o-x;return a||(d-M<6&&(M=M-d+V(d+4,33)*33),g=R(R(M+1,33)-1,4),g===-1&&(g=4)),{leap:g,gy:r,march:B}}function Pa(e,a,u){const r=Ct(e,!0);return $e(r.gy,3,r.march)+(a-1)*31-V(a,7)*(a-7)+u-1}function Ba(e){const a=Yt(e).gy;let u=a-621,r,o,s;const i=Ct(u,!1),d=$e(a,3,i.march);if(s=e-d,s>=0){if(s<=185)return o=1+V(s,31),r=R(s,31)+1,{jy:u,jm:o,jd:r};s-=186}else u-=1,s+=179,i.leap===1&&(s+=1);return o=7+V(s,30),r=R(s,30)+1,{jy:u,jm:o,jd:r}}function $e(e,a,u){let r=V((e+V(a-8,6)+100100)*1461,4)+V(153*R(a+9,12)+2,5)+u-34840408;return r=r-V(V(e+100100+V(a-8,6),100)*3,4)+752,r}function Yt(e){let a=4*e+139361631;a=a+V(V(4*e+183187720,146097)*3,4)*4-3908;const u=V(R(a,1461),4)*5+308,r=V(R(u,153),5)+1,o=R(V(u,153),12)+1;return{gy:V(a,1461)-100100+V(8-o,6),gm:o,gd:r}}function V(e,a){return~~(e/a)}function R(e,a){return e-~~(e/a)*a}const Ra=["gregorian","persian"],_t={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Ra.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Fa=["update:modelValue"];function $(e){return e.year+"/"+k(e.month)+"/"+k(e.day)}function La(e,a){const u=p(()=>e.disable!==!0&&e.readonly!==!0),r=p(()=>u.value===!0?0:-1),o=p(()=>{const d=[];return e.color!==void 0&&d.push(`bg-${e.color}`),e.textColor!==void 0&&d.push(`text-${e.textColor}`),d.join(" ")});function s(){return e.locale!==void 0?{...a.lang.date,...e.locale}:a.lang.date}function i(d){const g=new Date,M=d===!0?null:0;if(e.calendar==="persian"){const h=Aa(g);return{year:h.jy,month:h.jm,day:h.jd}}return{year:g.getFullYear(),month:g.getMonth()+1,day:g.getDate(),hour:M,minute:M,second:M,millisecond:M}}return{editable:u,tabindex:r,headerClass:o,getLocale:s,getCurrentDate:i}}const Vt=864e5,Ua=36e5,Xe=6e4,Ht="YYYY-MM-DDTHH:mm:ss.SSSZ",za=/\[((?:[^\]\\]|\\]|\\)*)\]|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Za=/(\[[^\]]*\])|do|d{1,4}|Mo|M{1,4}|m{1,2}|wo|w{1,2}|Qo|Do|DDDo|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,ze={};function Ka(e,a){const u="("+a.days.join("|")+")",r=e+u;if(ze[r]!==void 0)return ze[r];const o="("+a.daysShort.join("|")+")",s="("+a.months.join("|")+")",i="("+a.monthsShort.join("|")+")",d={};let g=0;const M=e.replace(Za,x=>{switch(g++,x){case"YY":return d.YY=g,"(-?\\d{1,2})";case"YYYY":return d.YYYY=g,"(-?\\d{1,4})";case"M":return d.M=g,"(\\d{1,2})";case"Mo":return d.M=g++,"(\\d{1,2}(st|nd|rd|th))";case"MM":return d.M=g,"(\\d{2})";case"MMM":return d.MMM=g,i;case"MMMM":return d.MMMM=g,s;case"D":return d.D=g,"(\\d{1,2})";case"Do":return d.D=g++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return d.D=g,"(\\d{2})";case"H":return d.H=g,"(\\d{1,2})";case"HH":return d.H=g,"(\\d{2})";case"h":return d.h=g,"(\\d{1,2})";case"hh":return d.h=g,"(\\d{2})";case"m":return d.m=g,"(\\d{1,2})";case"mm":return d.m=g,"(\\d{2})";case"s":return d.s=g,"(\\d{1,2})";case"ss":return d.s=g,"(\\d{2})";case"S":return d.S=g,"(\\d{1})";case"SS":return d.S=g,"(\\d{2})";case"SSS":return d.S=g,"(\\d{3})";case"A":return d.A=g,"(AM|PM)";case"a":return d.a=g,"(am|pm)";case"aa":return d.aa=g,"(a\\.m\\.|p\\.m\\.)";case"ddd":return o;case"dddd":return u;case"Q":case"d":case"E":return"(\\d{1})";case"do":return g++,"(\\d{1}(st|nd|rd|th))";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"DDDo":return g++,"(\\d{1,3}(st|nd|rd|th))";case"w":return"(\\d{1,2})";case"wo":return g++,"(\\d{1,2}(st|nd|rd|th))";case"ww":return"(\\d{2})";case"Z":return d.Z=g,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return d.ZZ=g,"(Z|[+-]\\d{2}\\d{2})";case"X":return d.X=g,"(-?\\d+)";case"x":return d.x=g,"(-?\\d{4,})";default:return g--,x[0]==="["&&(x=x.substring(1,x.length-1)),x.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),h={map:d,regex:new RegExp("^"+M)};return ze[r]=h,h}function Tt(e,a){return e!==void 0?e:a!==void 0?a.date:na.date}function xt(e,a=""){const u=e>0?"-":"+",r=Math.abs(e),o=Math.floor(r/60),s=r%60;return u+k(o)+a+k(s)}function Ja(e,a,u,r,o){const s={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(o!==void 0&&Object.assign(s,o),e==null||e===""||typeof e!="string")return s;a===void 0&&(a=Ht);const i=Tt(u,St.props),d=i.months,g=i.monthsShort,{regex:M,map:h}=Ka(a,i),x=e.match(M);if(x===null)return s;let B="";if(h.X!==void 0||h.x!==void 0){const N=parseInt(x[h.X!==void 0?h.X:h.x],10);if(isNaN(N)===!0||N<0)return s;const E=new Date(N*(h.X!==void 0?1e3:1));s.year=E.getFullYear(),s.month=E.getMonth()+1,s.day=E.getDate(),s.hour=E.getHours(),s.minute=E.getMinutes(),s.second=E.getSeconds(),s.millisecond=E.getMilliseconds()}else{if(h.YYYY!==void 0)s.year=parseInt(x[h.YYYY],10);else if(h.YY!==void 0){const N=parseInt(x[h.YY],10);s.year=N<0?N:2e3+N}if(h.M!==void 0){if(s.month=parseInt(x[h.M],10),s.month<1||s.month>12)return s}else h.MMM!==void 0?s.month=g.indexOf(x[h.MMM])+1:h.MMMM!==void 0&&(s.month=d.indexOf(x[h.MMMM])+1);if(h.D!==void 0){if(s.day=parseInt(x[h.D],10),s.year===null||s.month===null||s.day<1)return s;const N=r!=="persian"?new Date(s.year,s.month,0).getDate():He(s.year,s.month);if(s.day>N)return s}h.H!==void 0?s.hour=parseInt(x[h.H],10)%24:h.h!==void 0&&(s.hour=parseInt(x[h.h],10)%12,(h.A&&x[h.A]==="PM"||h.a&&x[h.a]==="pm"||h.aa&&x[h.aa]==="p.m.")&&(s.hour+=12),s.hour=s.hour%24),h.m!==void 0&&(s.minute=parseInt(x[h.m],10)%60),h.s!==void 0&&(s.second=parseInt(x[h.s],10)%60),h.S!==void 0&&(s.millisecond=parseInt(x[h.S],10)*10**(3-x[h.S].length)),(h.Z!==void 0||h.ZZ!==void 0)&&(B=h.Z!==void 0?x[h.Z].replace(":",""):x[h.ZZ],s.timezoneOffset=(B[0]==="+"?-1:1)*(60*B.slice(1,3)+1*B.slice(3,5)))}return s.dateHash=k(s.year,4)+"/"+k(s.month)+"/"+k(s.day),s.timeHash=k(s.hour)+":"+k(s.minute)+":"+k(s.second)+B,s}function Ze(e){const a=new Date(e.getFullYear(),e.getMonth(),e.getDate());a.setDate(a.getDate()-(a.getDay()+6)%7+3);const u=new Date(a.getFullYear(),0,4);u.setDate(u.getDate()-(u.getDay()+6)%7+3);const r=a.getTimezoneOffset()-u.getTimezoneOffset();a.setHours(a.getHours()-r);const o=(a-u)/(Vt*7);return 1+Math.floor(o)}function J(e,a,u){const r=new Date(e),o=`set${u===!0?"UTC":""}`;switch(a){case"year":case"years":r[`${o}Month`](0);case"month":case"months":r[`${o}Date`](1);case"day":case"days":case"date":r[`${o}Hours`](0);case"hour":case"hours":r[`${o}Minutes`](0);case"minute":case"minutes":r[`${o}Seconds`](0);case"second":case"seconds":r[`${o}Milliseconds`](0)}return r}function Ve(e,a,u){return(e.getTime()-e.getTimezoneOffset()*Xe-(a.getTime()-a.getTimezoneOffset()*Xe))/u}function It(e,a,u="days"){const r=new Date(e),o=new Date(a);switch(u){case"years":case"year":return r.getFullYear()-o.getFullYear();case"months":case"month":return(r.getFullYear()-o.getFullYear())*12+r.getMonth()-o.getMonth();case"days":case"day":case"date":return Ve(J(r,"day"),J(o,"day"),Vt);case"hours":case"hour":return Ve(J(r,"hour"),J(o,"hour"),Ua);case"minutes":case"minute":return Ve(J(r,"minute"),J(o,"minute"),Xe);case"seconds":case"second":return Ve(J(r,"second"),J(o,"second"),1e3)}}function Ke(e){return It(e,J(e,"year"),"days")+1}function ve(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const Dt={YY(e,a,u){const r=this.YYYY(e,a,u)%100;return r>=0?k(r):"-"+k(Math.abs(r))},YYYY(e,a,u){return u??e.getFullYear()},M(e){return e.getMonth()+1},Mo(e){return ve(e.getMonth()+1)},MM(e){return k(e.getMonth()+1)},MMM(e,a){return a.monthsShort[e.getMonth()]},MMMM(e,a){return a.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return ve(this.Q(e))},D(e){return e.getDate()},Do(e){return ve(e.getDate())},DD(e){return k(e.getDate())},DDD(e){return Ke(e)},DDDo(e){return ve(Ke(e))},DDDD(e){return k(Ke(e),3)},d(e){return e.getDay()},do(e){return ve(e.getDay())},dd(e,a){return a.days[e.getDay()].slice(0,2)},ddd(e,a){return a.daysShort[e.getDay()]},dddd(e,a){return a.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return Ze(e)},wo(e){return ve(Ze(e))},ww(e){return k(Ze(e))},H(e){return e.getHours()},HH(e){return k(e.getHours())},h(e){const a=e.getHours();return a===0?12:a>12?a%12:a},hh(e){return k(this.h(e))},m(e){return e.getMinutes()},mm(e){return k(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return k(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return k(Math.floor(e.getMilliseconds()/10))},SSS(e){return k(e.getMilliseconds(),3)},A(e){return e.getHours()<12?"AM":"PM"},a(e){return e.getHours()<12?"am":"pm"},aa(e){return e.getHours()<12?"a.m.":"p.m."},Z(e,a,u,r){const o=r??e.getTimezoneOffset();return xt(o,":")},ZZ(e,a,u,r){const o=r??e.getTimezoneOffset();return xt(o)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function Xa(e,a,u,r,o){if(e!==0&&!e||e===1/0||e===-1/0)return;const s=new Date(e);if(isNaN(s))return;a===void 0&&(a=Ht);const i=Tt(u,St.props);return a.replace(za,(d,g)=>d in Dt?Dt[d](s,i,r,o):g===void 0?d:g.split("\\]").join("]"))}const K=20,Wa=["Calendar","Years","Months"],wt=e=>Wa.includes(e),Je=e=>/^-?[\d]+\/[0-1]\d$/.test(e),fe=" — ";function ee(e){return e.year+"/"+k(e.month)}const Ga=De({name:"QDate",props:{..._t,...oa,...Mt,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{..._t.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Je},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Je},navigationMaxYearMonth:{type:String,validator:Je},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:wt}},emits:[...Fa,"rangeStart","rangeEnd","navigation"],setup(e,{slots:a,emit:u}){const{proxy:r}=Ge(),{$q:o}=r,s=qt(e,o),{getCache:i}=ba(),{tabindex:d,headerClass:g,getLocale:M,getCurrentDate:h}=La(e,o);let x;const B=la(e),N=ra(B),E=U(null),C=U(st()),q=U(M()),we=p(()=>st()),Te=p(()=>M()),F=p(()=>h()),_=U(rt(C.value,q.value)),A=U(e.defaultView),le=p(()=>o.lang.rtl===!0?"right":"left"),X=U(le.value),se=U(le.value),he=_.value.year,H=U(he-he%K-(he<0?K:0)),T=U(null),ge=p(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(s.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),I=p(()=>e.color||"primary"),Z=p(()=>e.textColor||"white"),ne=p(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),re=p(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),z=p(()=>re.value.filter(t=>typeof t=="string").map(t=>Ae(t,C.value,q.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),ie=p(()=>{const t=n=>Ae(n,C.value,q.value);return re.value.filter(n=>sa(n)===!0&&n.from!==void 0&&n.to!==void 0).map(n=>({from:t(n.from),to:t(n.to)})).filter(n=>n.from.dateHash!==null&&n.to.dateHash!==null&&n.from.dateHash<n.to.dateHash)}),Me=p(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const n=pt(t.year,t.month,t.day);return new Date(n.gy,n.gm-1,n.gd)}),Ie=p(()=>e.calendar==="persian"?$:(t,n,l)=>Xa(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),n===void 0?C.value:n,l===void 0?q.value:l,t.year,t.timezoneOffset)),ye=p(()=>z.value.length+ie.value.reduce((t,n)=>t+1+It(Me.value(n.to),Me.value(n.from)),0)),et=p(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(T.value!==null){const l=T.value.init,m=Me.value(l);return q.value.daysShort[m.getDay()]+", "+q.value.monthsShort[l.month-1]+" "+l.day+fe+"?"}if(ye.value===0)return fe;if(ye.value>1)return`${ye.value} ${q.value.pluralDay}`;const t=z.value[0],n=Me.value(t);return isNaN(n.valueOf())===!0?fe:q.value.headerTitle!==void 0?q.value.headerTitle(n,t):q.value.daysShort[n.getDay()]+", "+q.value.monthsShort[t.month-1]+" "+t.day}),Ot=p(()=>z.value.concat(ie.value.map(n=>n.from)).sort((n,l)=>n.year-l.year||n.month-l.month)[0]),Nt=p(()=>z.value.concat(ie.value.map(n=>n.to)).sort((n,l)=>l.year-n.year||l.month-n.month)[0]),tt=p(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(ye.value===0)return fe;if(ye.value>1){const t=Ot.value,n=Nt.value,l=q.value.monthsShort;return l[t.month-1]+(t.year!==n.year?" "+t.year+fe+l[n.month-1]+" ":t.month!==n.month?fe+l[n.month-1]:"")+" "+n.year}return z.value[0].year}),qe=p(()=>{const t=[o.iconSet.datetime.arrowLeft,o.iconSet.datetime.arrowRight];return o.lang.rtl===!0?t.reverse():t}),at=p(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):q.value.firstDayOfWeek),Et=p(()=>{const t=q.value.daysShort,n=at.value;return n>0?t.slice(n,7).concat(t.slice(0,n)):t}),W=p(()=>{const t=_.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():He(t.year,t.month)}),At=p(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),Q=p(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),j=p(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Oe=p(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return Q.value!==null&&Q.value.year>=_.value.year&&(t.year.prev=!1,Q.value.year===_.value.year&&Q.value.month>=_.value.month&&(t.month.prev=!1)),j.value!==null&&j.value.year<=_.value.year&&(t.year.next=!1,j.value.year===_.value.year&&j.value.month<=_.value.month&&(t.month.next=!1)),t}),Se=p(()=>{const t={};return z.value.forEach(n=>{const l=ee(n);t[l]===void 0&&(t[l]=[]),t[l].push(n.day)}),t}),nt=p(()=>{const t={};return ie.value.forEach(n=>{const l=ee(n.from),m=ee(n.to);if(t[l]===void 0&&(t[l]=[]),t[l].push({from:n.from.day,to:l===m?n.to.day:void 0,range:n}),l<m){let v;const{year:w,month:y}=n.from,D=y<12?{year:w,month:y+1}:{year:w+1,month:1};for(;(v=ee(D))<=m;)t[v]===void 0&&(t[v]=[]),t[v].push({from:void 0,to:v===m?n.to.day:void 0,range:n}),D.month++,D.month>12&&(D.year++,D.month=1)}}),t}),be=p(()=>{if(T.value===null)return;const{init:t,initHash:n,final:l,finalHash:m}=T.value,[v,w]=n<=m?[t,l]:[l,t],y=ee(v),D=ee(w);if(y!==L.value&&D!==L.value)return;const Y={};return y===L.value?(Y.from=v.day,Y.includeFrom=!0):Y.from=1,D===L.value?(Y.to=w.day,Y.includeTo=!0):Y.to=W.value,Y}),L=p(()=>ee(_.value)),Qt=p(()=>{const t={};if(e.options===void 0){for(let l=1;l<=W.value;l++)t[l]=!0;return t}const n=typeof e.options=="function"?e.options:l=>e.options.includes(l);for(let l=1;l<=W.value;l++){const m=L.value+"/"+k(l);t[l]=n(m)}return t}),jt=p(()=>{const t={};if(e.events===void 0)for(let n=1;n<=W.value;n++)t[n]=!1;else{const n=typeof e.events=="function"?e.events:l=>e.events.includes(l);for(let l=1;l<=W.value;l++){const m=L.value+"/"+k(l);t[l]=n(m)===!0&&At.value(m)}}return t}),Pt=p(()=>{let t,n;const{year:l,month:m}=_.value;if(e.calendar!=="persian")t=new Date(l,m-1,1),n=new Date(l,m-1,0).getDate();else{const v=pt(l,m,1);t=new Date(v.gy,v.gm-1,v.gd);let w=m-1,y=l;w===0&&(w=12,y--),n=He(y,w)}return{days:t.getDay()-at.value-1,endDay:n}}),ot=p(()=>{const t=[],{days:n,endDay:l}=Pt.value,m=n<0?n+7:n;if(m<6)for(let y=l-m;y<=l;y++)t.push({i:y,fill:!0});const v=t.length;for(let y=1;y<=W.value;y++){const D={i:y,event:jt.value[y],classes:[]};Qt.value[y]===!0&&(D.in=!0,D.flat=!0),t.push(D)}if(Se.value[L.value]!==void 0&&Se.value[L.value].forEach(y=>{const D=v+y-1;Object.assign(t[D],{selected:!0,unelevated:!0,flat:!1,color:I.value,textColor:Z.value})}),nt.value[L.value]!==void 0&&nt.value[L.value].forEach(y=>{if(y.from!==void 0){const D=v+y.from-1,Y=v+(y.to||W.value)-1;for(let pe=D;pe<=Y;pe++)Object.assign(t[pe],{range:y.range,unelevated:!0,color:I.value,textColor:Z.value});Object.assign(t[D],{rangeFrom:!0,flat:!1}),y.to!==void 0&&Object.assign(t[Y],{rangeTo:!0,flat:!1})}else if(y.to!==void 0){const D=v+y.to-1;for(let Y=v;Y<=D;Y++)Object.assign(t[Y],{range:y.range,unelevated:!0,color:I.value,textColor:Z.value});Object.assign(t[D],{flat:!1,rangeTo:!0})}else{const D=v+W.value-1;for(let Y=v;Y<=D;Y++)Object.assign(t[Y],{range:y.range,unelevated:!0,color:I.value,textColor:Z.value})}}),be.value!==void 0){const y=v+be.value.from-1,D=v+be.value.to-1;for(let Y=y;Y<=D;Y++)t[Y].color=I.value,t[Y].editRange=!0;be.value.includeFrom===!0&&(t[y].editRangeFrom=!0),be.value.includeTo===!0&&(t[D].editRangeTo=!0)}_.value.year===F.value.year&&_.value.month===F.value.month&&(t[v+F.value.day-1].today=!0);const w=t.length%7;if(w>0){const y=7-w;for(let D=1;D<=y;D++)t.push({i:D,fill:!0})}return t.forEach(y=>{let D="q-date__calendar-item ";y.fill===!0?D+="q-date__calendar-item--fill":(D+=`q-date__calendar-item--${y.in===!0?"in":"out"}`,y.range!==void 0&&(D+=` q-date__range${y.rangeTo===!0?"-to":y.rangeFrom===!0?"-from":""}`),y.editRange===!0&&(D+=` q-date__edit-range${y.editRangeFrom===!0?"-from":""}${y.editRangeTo===!0?"-to":""}`),(y.range!==void 0||y.editRange===!0)&&(D+=` text-${y.color}`)),y.classes=D}),t}),Bt=p(()=>e.disable===!0?{"aria-disabled":"true"}:{});te(()=>e.modelValue,t=>{if(x===JSON.stringify(t))x=0;else{const n=rt(C.value,q.value);ue(n.year,n.month,n)}}),te(A,()=>{E.value!==null&&r.$el.contains(document.activeElement)===!0&&E.value.focus()}),te(()=>_.value.year+"|"+_.value.month,()=>{u("navigation",{year:_.value.year,month:_.value.month})}),te(we,t=>{mt(t,q.value,"mask"),C.value=t}),te(Te,t=>{mt(C.value,t,"locale"),q.value=t});function Ne(t){x=JSON.stringify(t)}function lt(){const{year:t,month:n,day:l}=F.value,m={..._.value,year:t,month:n,day:l},v=Se.value[ee(m)];(v===void 0||v.includes(m.day)===!1)&&je(m),Ee(m.year,m.month)}function Rt(t){wt(t)===!0&&(A.value=t)}function Ft(t,n){["month","year"].includes(t)&&(t==="month"?ut:Qe)(n===!0?-1:1)}function Ee(t,n){A.value="Calendar",ue(t,n)}function Lt(t,n){if(e.range===!1||!t){T.value=null;return}const l=Object.assign({..._.value},t),m=n!==void 0?Object.assign({..._.value},n):l;T.value={init:l,initHash:$(l),final:m,finalHash:$(m)},Ee(l.year,l.month)}function st(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Ae(t,n,l){return Ja(t,n,l,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function rt(t,n){const l=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(l.length===0)return it();const m=l[l.length-1],v=Ae(m.from!==void 0?m.from:m,t,n);return v.dateHash===null?it():v}function it(){let t,n;if(e.defaultYearMonth!==void 0){const l=e.defaultYearMonth.split("/");t=parseInt(l[0],10),n=parseInt(l[1],10)}else{const l=F.value!==void 0?F.value:h();t=l.year,n=l.month}return{year:t,month:n,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+k(n)+"/01"}}function ut(t){let n=_.value.year,l=Number(_.value.month)+t;l===13?(l=1,n++):l===0&&(l=12,n--),ue(n,l),ne.value===!0&&ke("month")}function Qe(t){const n=Number(_.value.year)+t;ue(n,_.value.month),ne.value===!0&&ke("year")}function Ut(t){ue(t,_.value.month),A.value=e.defaultView==="Years"?"Months":"Calendar",ne.value===!0&&ke("year")}function zt(t){ue(_.value.year,t),A.value="Calendar",ne.value===!0&&ke("month")}function Zt(t,n){(Se.value[n]?.includes(t.day)===!0?Pe:je)(t)}function oe(t){return{year:t.year,month:t.month,day:t.day}}function ue(t,n,l){if(Q.value!==null&&t<=Q.value.year&&((n<Q.value.month||t<Q.value.year)&&(n=Q.value.month),t=Q.value.year),j.value!==null&&t>=j.value.year&&((n>j.value.month||t>j.value.year)&&(n=j.value.month),t=j.value.year),l!==void 0){const{hour:v,minute:w,second:y,millisecond:D,timezoneOffset:Y,timeHash:pe}=l;Object.assign(_.value,{hour:v,minute:w,second:y,millisecond:D,timezoneOffset:Y,timeHash:pe})}const m=t+"/"+k(n)+"/01";m!==_.value.dateHash&&(X.value=_.value.dateHash<m==(o.lang.rtl!==!0)?"left":"right",t!==_.value.year&&(se.value=X.value),vt(()=>{H.value=t-t%K-(t<0?K:0),Object.assign(_.value,{year:t,month:n,day:1,dateHash:m})}))}function dt(t,n,l){const m=t!==null&&t.length===1&&e.multiple===!1?t[0]:t,{reason:v,details:w}=ct(n,l);Ne(m),u("update:modelValue",m,v,w)}function ke(t){const n=z.value[0]!==void 0&&z.value[0].dateHash!==null?{...z.value[0]}:{..._.value};vt(()=>{n.year=_.value.year,n.month=_.value.month;const l=e.calendar!=="persian"?new Date(n.year,n.month,0).getDate():He(n.year,n.month);n.day=Math.min(Math.max(1,n.day),l);const m=de(n),{details:v}=ct("",n);Ne(m),u("update:modelValue",m,t,v)})}function ct(t,n){return n.from!==void 0?{reason:`${t}-range`,details:{...oe(n.target),from:oe(n.from),to:oe(n.to)}}:{reason:`${t}-day`,details:oe(n)}}function de(t,n,l){return t.from!==void 0?{from:Ie.value(t.from,n,l),to:Ie.value(t.to,n,l)}:Ie.value(t,n,l)}function je(t){let n;if(e.multiple===!0)if(t.from!==void 0){const l=$(t.from),m=$(t.to),v=z.value.filter(y=>y.dateHash<l||y.dateHash>m),w=ie.value.filter(({from:y,to:D})=>D.dateHash<l||y.dateHash>m);n=v.concat(w).concat(t).map(y=>de(y))}else{const l=re.value.slice();l.push(de(t)),n=l}else n=de(t);dt(n,"add",t)}function Pe(t){if(e.noUnset===!0)return;let n=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const l=de(t);t.from!==void 0?n=e.modelValue.filter(m=>m.from!==void 0?m.from!==l.from&&m.to!==l.to:!0):n=e.modelValue.filter(m=>m!==l),n.length===0&&(n=null)}dt(n,"remove",t)}function mt(t,n,l){const m=z.value.concat(ie.value).map(w=>de(w,t,n)).filter(w=>w.from!==void 0?w.from.dateHash!==null&&w.to.dateHash!==null:w.dateHash!==null),v=(e.multiple===!0?m:m[0])||null;Ne(v),u("update:modelValue",v,l)}function Kt(){if(e.minimal!==!0)return b("div",{class:"q-date__header "+g.value},[b("div",{class:"relative-position"},[b(_e,{name:"q-transition--fade"},()=>b("div",{key:"h-yr-"+tt.value,class:"q-date__header-subtitle q-date__header-link "+(A.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:d.value,...i("vY",{onClick(){A.value="Years"},onKeyup(t){t.keyCode===13&&(A.value="Years")}})},[tt.value]))]),b("div",{class:"q-date__header-title relative-position flex no-wrap"},[b("div",{class:"relative-position col"},[b(_e,{name:"q-transition--fade"},()=>b("div",{key:"h-sub"+et.value,class:"q-date__header-title-label q-date__header-link "+(A.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:d.value,...i("vC",{onClick(){A.value="Calendar"},onKeyup(t){t.keyCode===13&&(A.value="Calendar")}})},[et.value]))]),e.todayBtn===!0?b(O,{class:"q-date__header-today self-start",icon:o.iconSet.datetime.today,"aria-label":o.lang.date.today,flat:!0,size:"sm",round:!0,tabindex:d.value,onClick:lt}):null])])}function Be({label:t,type:n,key:l,dir:m,goTo:v,boundaries:w,cls:y}){return[b("div",{class:"row items-center q-date__arrow"},[b(O,{round:!0,dense:!0,size:"sm",flat:!0,icon:qe.value[0],"aria-label":n==="Years"?o.lang.date.prevYear:o.lang.date.prevMonth,tabindex:d.value,disable:w.prev===!1,...i("go-#"+n,{onClick(){v(-1)}})})]),b("div",{class:"relative-position overflow-hidden flex flex-center"+y},[b(_e,{name:"q-transition--jump-"+m},()=>b("div",{key:l},[b(O,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:d.value,...i("view#"+n,{onClick:()=>{A.value=n}})})]))]),b("div",{class:"row items-center q-date__arrow"},[b(O,{round:!0,dense:!0,size:"sm",flat:!0,icon:qe.value[1],"aria-label":n==="Years"?o.lang.date.nextYear:o.lang.date.nextMonth,tabindex:d.value,disable:w.next===!1,...i("go+#"+n,{onClick(){v(1)}})})])]}const Jt={Calendar:()=>[b("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[b("div",{class:"q-date__navigation row items-center no-wrap"},Be({label:q.value.months[_.value.month-1],type:"Months",key:_.value.month,dir:X.value,goTo:ut,boundaries:Oe.value.month,cls:" col"}).concat(Be({label:_.value.year,type:"Years",key:_.value.year,dir:se.value,goTo:Qe,boundaries:Oe.value.year,cls:""}))),b("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Et.value.map(t=>b("div",{class:"q-date__calendar-item"},[b("div",t)]))),b("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[b(_e,{name:"q-transition--slide-"+X.value},()=>b("div",{key:L.value,class:"q-date__calendar-days fit"},ot.value.map(t=>b("div",{class:t.classes},[t.in===!0?b(O,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:d.value,...i("day#"+t.i,{onClick:()=>{Xt(t.i)},onMouseover:()=>{Wt(t.i)}})},t.event!==!1?()=>b("div",{class:"q-date__event bg-"+t.event}):null):b("div",""+t.i)]))))])])],Months(){const t=_.value.year===F.value.year,n=m=>Q.value!==null&&_.value.year===Q.value.year&&Q.value.month>m||j.value!==null&&_.value.year===j.value.year&&j.value.month<m,l=q.value.monthsShort.map((m,v)=>{const w=_.value.month===v+1;return b("div",{class:"q-date__months-item flex flex-center"},[b(O,{class:t===!0&&F.value.month===v+1?"q-date__today":null,flat:w!==!0,label:m,unelevated:w,color:w===!0?I.value:null,textColor:w===!0?Z.value:null,tabindex:d.value,disable:n(v+1),...i("month#"+v,{onClick:()=>{zt(v+1)}})})])});return e.yearsInMonthView===!0&&l.unshift(b("div",{class:"row no-wrap full-width"},[Be({label:_.value.year,type:"Years",key:_.value.year,dir:se.value,goTo:Qe,boundaries:Oe.value.year,cls:" col"})])),b("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},l)},Years(){const t=H.value,n=t+K,l=[],m=v=>Q.value!==null&&Q.value.year>v||j.value!==null&&j.value.year<v;for(let v=t;v<=n;v++){const w=_.value.year===v;l.push(b("div",{class:"q-date__years-item flex flex-center"},[b(O,{key:"yr"+v,class:F.value.year===v?"q-date__today":null,flat:!w,label:v,dense:!0,unelevated:w,color:w===!0?I.value:null,textColor:w===!0?Z.value:null,tabindex:d.value,disable:m(v),...i("yr#"+v,{onClick:()=>{Ut(v)}})})]))}return b("div",{class:"q-date__view q-date__years flex flex-center"},[b("div",{class:"col-auto"},[b(O,{round:!0,dense:!0,flat:!0,icon:qe.value[0],"aria-label":o.lang.date.prevRangeYears(K),tabindex:d.value,disable:m(t),...i("y-",{onClick:()=>{H.value-=K}})})]),b("div",{class:"q-date__years-content col self-stretch row items-center"},l),b("div",{class:"col-auto"},[b(O,{round:!0,dense:!0,flat:!0,icon:qe.value[1],"aria-label":o.lang.date.nextRangeYears(K),tabindex:d.value,disable:m(n),...i("y+",{onClick:()=>{H.value+=K}})})])])}};function Xt(t){const n={..._.value,day:t};if(e.range===!1){Zt(n,L.value);return}if(T.value===null){const l=ot.value.find(v=>v.fill!==!0&&v.i===t);if(e.noUnset!==!0&&l.range!==void 0){Pe({target:n,from:l.range.from,to:l.range.to});return}if(l.selected===!0){Pe(n);return}const m=$(n);T.value={init:n,initHash:m,final:n,finalHash:m},u("rangeStart",oe(n))}else{const l=T.value.initHash,m=$(n),v=l<=m?{from:T.value.init,to:n}:{from:n,to:T.value.init};T.value=null,je(l===m?n:{target:n,...v}),u("rangeEnd",{from:oe(v.from),to:oe(v.to)})}}function Wt(t){if(T.value!==null){const n={..._.value,day:t};Object.assign(T.value,{final:n,finalHash:$(n)})}}return Object.assign(r,{setToday:lt,setView:Rt,offsetCalendar:Ft,setCalendarTo:Ee,setEditingRange:Lt}),()=>{const t=[b("div",{class:"q-date__content col relative-position"},[b(_e,{name:"q-transition--fade"},Jt[A.value])])],n=We(a.default);return n!==void 0&&t.push(b("div",{class:"q-date__actions"},n)),e.name!==void 0&&e.disable!==!0&&N(t,"push"),b("div",{class:ge.value,...Bt.value},[Kt(),b("div",{ref:E,class:"q-date__main col column",tabindex:-1},t)])}}}),$a=De({name:"QPopupProxy",props:{...wa,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:a,emit:u,attrs:r}){const{proxy:o}=Ge(),{$q:s}=o,i=U(!1),d=U(null),g=p(()=>parseInt(e.breakpoint,10)),{canShow:M}=Ma({showing:i});function h(){return s.screen.width<g.value||s.screen.height<g.value?"dialog":"menu"}const x=U(h()),B=p(()=>x.value==="menu"?{maxHeight:"99vh"}:{});te(()=>h(),C=>{i.value!==!0&&(x.value=C)});function N(C){i.value=!0,u("show",C)}function E(C){i.value=!1,x.value=h(),u("hide",C)}return Object.assign(o,{show(C){M(C)===!0&&d.value.show(C)},hide(C){d.value.hide(C)},toggle(C){d.value.toggle(C)}}),ia(o,"currentComponent",()=>({type:x.value,ref:d.value})),()=>{const C={ref:d,...B.value,...r,onShow:N,onHide:E};let q;return x.value==="dialog"?q=kt:(q=qa,Object.assign(C,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),b(q,C,a.default)}}}),en={name:"IndexPage",data(){return{eventoId:1,evento:null,horarios:[],horariosByDate:{},slotOptions:[],slotKey:null,slotLabel:"",loading:!1,loadingHorarios:!1,compraDialog:!1,accept_terms:!1,termsError:!1,phone:"",email_confirm:"",dni:"",email:"",nombre_completo:"",date:null,dateLabel:"Selecciona una fecha",slide:1,autoplay:!0,tab:"tickets",nationality:"NACIONAL",ticketType:"simple",adults:1,kids:0}},async mounted(){this.$route.query.session_id&&this.$alert.success("¡Gracias por tu compra! Un equipo de soporte se pondrá en contacto contigo pronto."),await this.loadEventoAndHorarios()},computed:{slotResumen(){return!this.date||!this.slotKey?null:(this.horariosByDate[this.date]||{})[this.slotKey]||null},priceAdult(){return this.slotResumen?.adulto?.precio??0},priceKid(){return this.slotResumen?.nino?.precio??0},total(){return this.adults*this.priceAdult+this.kids*this.priceKid},canBuy(){if(!this.date||!this.slotKey||this.total<=0)return!1;const e=this.slotResumen;return!(!e||this.adults>0&&this.adults>e.adulto.disponibles||this.kids>0&&this.kids>e.nino.disponibles)}},methods:{async loadEventoAndHorarios(){try{this.loadingHorarios=!0;const{data:e}=await this.$axios.get(`eventos/${this.eventoId}`);this.evento=e;const a=[];let u=1;const r=200;for(;;){const{data:o}=await this.$axios.get(`eventos/${this.eventoId}/horarios`,{params:{page:u,perPage:r,activo:!0}}),s=o?.data||[];if(a.push(...s),(o?.current_page||1)>=(o?.last_page||1)||(u++,u>50))break}this.horarios=a.filter(o=>o.activo&&o.starts_at),this.buildHorariosIndex()}catch(e){console.error(e),this.$alert.error(e.response?.data?.message||"Error cargando evento/horarios")}finally{this.loadingHorarios=!1}},buildHorariosIndex(){const e={},a=r=>{const o=String(r||"").toLowerCase();return o.includes("adult")?"adulto":o.includes("ni")?"nino":o};for(const r of this.horarios){const o=r.fecha||(r.starts_at||"").slice(0,10);if(!o)continue;e[o]||(e[o]={});const s=r.starts_at;e[o][s]||(e[o][s]={adulto:{id:null,precio:0,disponibles:0,capacidad:0,reservados:0},nino:{id:null,precio:0,disponibles:0,capacidad:0,reservados:0},label:this.formatTimeLabel(s)});const i=a(r.plan),d=Number(r.capacidad||0),g=Number(r.reservados||0),M=Math.max(0,d-g);i==="adulto"?e[o][s].adulto={id:r.id,precio:Number(r.precio||0),disponibles:M,capacidad:d,reservados:g}:i==="nino"&&(e[o][s].nino={id:r.id,precio:Number(r.precio||0),disponibles:M,capacidad:d,reservados:g})}for(const r of Object.keys(e)){const o=e[r];for(const s of Object.keys(o)){const i=o[s];i.adulto.id||i.nino.id||delete o[s]}Object.keys(o).length===0&&delete e[r]}this.horariosByDate=e;const u=Object.keys(e).sort();!this.date&&u.length&&(this.date=u[0],this.onDateChange(this.date))},isDateEnabled(e){const a=String(e).replaceAll("/","-");return!!this.horariosByDate[a]},onDateChange(e){if(!e)return;const a=new Date(e+"T00:00:00");this.dateLabel=a.toLocaleDateString("es-ES",{weekday:"short",day:"numeric",month:"long",year:"numeric"});const u=this.horariosByDate[e]||{},r=Object.keys(u).sort().map(o=>({label:u[o].label,value:o}));this.slotOptions=r,this.slotKey=r.length?r[0].value:null,this.slotLabel=r.length?r[0].label:""},formatTimeLabel(e){const a=String(e).replace(" ","T"),u=new Date(a);return isNaN(u.getTime())?e:u.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})},formatCurrency(e){const a=(this.evento?.moneda||"EUR").toUpperCase();return new Intl.NumberFormat("es-ES",{style:"currency",currency:a}).format(Number(e||0))},inc(e){e==="adult"&&this.adults++,e==="kid"&&this.kids++},dec(e){e==="adult"&&(this.adults=Math.max(0,this.adults-1)),e==="kid"&&(this.kids=Math.max(0,this.kids-1))},async onBuy(){if(!this.date||!this.slotKey){this.$alert.error("Por favor selecciona una fecha y una hora.");return}if(!this.canBuy){this.$alert.error("No hay disponibilidad suficiente para la cantidad seleccionada.");return}this.compraDialog=!0},async continueBuy(){try{if(this.termsError=!1,!this.accept_terms){this.termsError=!0;return}if(!this.slotResumen){this.$alert.error("Selecciona una fecha y hora válida.");return}this.loading=!0;const e=[],a={evento_id:String(this.evento?.id||""),evento_slug:this.evento?.slug||"",evento_nombre:this.evento?.nombre||"",starts_at:this.slotKey,fecha:this.date,hora_label:this.slotLabel||this.formatTimeLabel(this.slotKey),nacionalidad:this.nationality,entrada_tipo:this.ticketType,dni:this.dni,nombre_completo:this.nombre_completo,phone:this.phone||""};if(this.slotResumen.adulto?.id&&(a.horario_adulto_id=String(this.slotResumen.adulto.id)),this.slotResumen.nino?.id&&(a.horario_nino_id=String(this.slotResumen.nino.id)),this.adults>0&&e.push({name:`Entrada Adulto - ${this.evento?.nombre||""} - ${a.hora_label}`,qty:this.adults,unit_amount:Math.round((this.priceAdult||0)*100)}),this.kids>0&&e.push({name:`Entrada Niño - ${this.evento?.nombre||""} - ${a.hora_label}`,qty:this.kids,unit_amount:Math.round((this.priceKid||0)*100)}),!e.length){this.$alert.error("Selecciona al menos una entrada.");return}a.adults=String(this.adults),a.kids=String(this.kids),a.total=String(this.total);const{data:u}=await this.$axios.post("stripe/checkout",{items:e,customer_email:this.email,metadata:a});window.location.href=u.checkout_url}catch(e){console.error(e),this.$alert.error(e.response?.data?.message||"Error creando el checkout. Revisa consola/Network.")}finally{this.loading=!1}}},watch:{slotKey(e){if(!e||!this.date){this.slotLabel="";return}const a=this.horariosByDate[this.date]||{};this.slotLabel=a[e]?.label||this.formatTimeLabel(e)}}},tn={class:"q-px-md"},an={class:"row items-center no-wrap q-px-md q-py-sm",style:{"border-radius":"999px",background:"rgba(20,20,20,.86)","backdrop-filter":"blur(10px)"}},nn={class:"q-px-md card-wrap"},on={class:"row q-col-gutter-xl items-start"},ln={class:"col-12 col-md-7"},sn={class:"text-h5 text-weight-bold text-primary2 q-mb-xs"},rn={class:"row items-center text-grey-7 q-mb-lg"},un={class:"text-caption"},dn={class:"row q-col-gutter-sm q-mb-lg"},cn={class:"col-12 col-sm-7"},mn={class:"col-12 col-sm-5"},vn={class:"text-caption text-grey-8"},fn={class:"text-caption text-grey-8 q-mt-xs"},hn={class:"col-12 col-md-5"},gn={class:"row q-col-gutter-md q-mb-lg"},yn={class:"col-6"},bn={class:"row items-center q-gutter-sm"},pn={class:"col-6"},_n={class:"row items-center q-gutter-sm"},xn={class:"row q-col-gutter-sm q-mb-md"},Dn={class:"col-12"},wn={class:"counter-pill"},Mn={class:"text-grey-8"},qn={class:"row items-center q-gutter-xs"},Sn={class:"col-12"},kn={class:"counter-pill"},Cn={class:"text-grey-8"},Yn={class:"row items-center q-gutter-xs"},Vn={class:"row items-center"},Hn={class:"text-h6 text-weight-bold"},Tn={class:"row justify-end q-mt-md"},In={key:0,class:"text-caption text-grey-7 q-mt-sm"},On={class:"row q-col-gutter-lg"},Nn={class:"col-12 col-md-7"},En={class:"row q-col-gutter-sm"},An={class:"col-12 col-md-6"},Qn={class:"col-12 col-md-6"},jn={class:"row q-col-gutter-sm"},Pn={class:"col-12 col-md-6"},Bn={class:"col-12 col-md-6"},Rn={class:"q-mt-sm"},Fn={class:"q-mt-md"},Ln={key:0,class:"text-negative text-caption q-mt-xs"},Un={class:"col-12 col-md-5"},zn={class:"q-mt-md"},Zn={class:"text-body2"},Kn={class:"q-mt-sm"},Jn={class:"text-body2"},Xn={class:"q-mt-sm"},Wn={class:"text-body2"},Gn={class:"row items-center q-mb-sm"},$n={class:"text-body2"},eo={class:"row items-center q-mb-sm"},to={class:"text-body2"},ao={class:"row items-center"},no={class:"text-body1 text-weight-bold"};function oo(e,a,u,r,o,s){return Ce(),ft(Va,{view:"hHh lpR fFf"},{default:S(()=>[f(Ya,null,{default:S(()=>[f(Ca,{class:"bg-grey-2"},{default:S(()=>[f(Ea,{swipeable:"",animated:"",modelValue:o.slide,"onUpdate:modelValue":a[1]||(a[1]=i=>o.slide=i),autoplay:o.autoplay,infinite:"",height:"420px",class:"rounded-borders"},{control:S(()=>[f(Ia,{position:"top",offset:[18,18],class:"full-width"},{default:S(()=>[c("div",tn,[c("div",an,[a[21]||(a[21]=c("div",{class:"row items-center no-wrap"},[c("div",{class:"brand-dot q-mr-sm"}),c("div",{class:"text-white text-weight-bold"},"VisitaEgipto")],-1)),f(G),f(pa,{modelValue:o.tab,"onUpdate:modelValue":a[0]||(a[0]=i=>o.tab=i),dense:"","no-caps":"","inline-label":"","outside-arrows":"","mobile-arrows":"",class:"text-white","active-color":"white","indicator-color":"transparent"},{default:S(()=>[f(Ye,{name:"tickets",label:"Tiquetes"}),f(Ye,{name:"gallery",label:"Galería"}),f(Ye,{name:"faq",label:"Preguntas frecuentes"}),f(Ye,{name:"contact",label:"Contacto"})]),_:1},8,["modelValue"])])])]),_:1})]),default:S(()=>[f(Ta,{name:1,"img-src":"home-hero.464470cb.webp"})]),_:1},8,["modelValue","autoplay"]),c("div",nn,[f(Re,{flat:"",class:"ticket-card"},{default:S(()=>[c("div",on,[c("div",ln,[c("div",sn,P(o.evento?.nombre||"Cargando evento..."),1),c("div",rn,[f(ce,{name:"place",size:"16px",class:"q-mr-xs"}),c("div",un,P(o.evento?.ciudad?o.evento.ciudad+(o.evento.pais?", "+o.evento.pais:""):"Selecciona fecha y hora"),1)]),a[24]||(a[24]=c("div",{class:"text-subtitle2 text-grey-8 q-mb-sm"}," Selecciona la fecha y la hora ",-1)),c("div",dn,[c("div",cn,[f(me,{modelValue:o.dateLabel,"onUpdate:modelValue":a[3]||(a[3]=i=>o.dateLabel=i),dense:"",outlined:"","bg-color":"grey-1",class:"pill-input",loading:o.loadingHorarios},{prepend:S(()=>[f(ce,{name:"event"})]),default:S(()=>[f($a,{"transition-show":"scale","transition-hide":"scale"},{default:S(()=>[f(Ga,{modelValue:o.date,"onUpdate:modelValue":[a[2]||(a[2]=i=>o.date=i),s.onDateChange],mask:"YYYY-MM-DD",minimal:"",options:s.isDateEnabled},null,8,["modelValue","options","onUpdate:modelValue"])]),_:1})]),_:1},8,["modelValue","loading"])]),c("div",mn,[f(Sa,{modelValue:o.slotKey,"onUpdate:modelValue":a[4]||(a[4]=i=>o.slotKey=i),options:o.slotOptions,dense:"",outlined:"","bg-color":"grey-1",class:"pill-input","emit-value":"","map-options":"",disable:!o.date||o.loadingHorarios,loading:o.loadingHorarios,label:"Hora"},{prepend:S(()=>[f(ce,{name:"schedule"})]),_:1},8,["modelValue","options","disable","loading"])])]),a[25]||(a[25]=c("div",{class:"text-subtitle2 text-grey-8 q-mb-sm"},"Nacionalidad",-1)),f(da,{modelValue:o.nationality,"onUpdate:modelValue":a[5]||(a[5]=i=>o.nationality=i),inline:"",class:"q-mb-md",options:[{label:"Nacional",value:"NACIONAL"},{label:"Extranjero",value:"EXTRANJERO"}]},null,8,["modelValue"]),o.slotKey&&s.slotResumen?(Ce(),ft(ka,{key:0,rounded:"",class:"bg-grey-1 q-mt-sm"},{default:S(()=>[c("div",vn,[a[22]||(a[22]=c("b",null,"Disponibilidad:",-1)),Le(" Adulto: "+P(s.slotResumen.adulto.disponibles)+" disponibles · Niño: "+P(s.slotResumen.nino.disponibles)+" disponibles ",1)]),c("div",fn,[a[23]||(a[23]=c("b",null,"Precios:",-1)),Le(" Adulto: "+P(s.formatCurrency(s.slotResumen.adulto.precio))+" · Niño: "+P(s.formatCurrency(s.slotResumen.nino.precio)),1)])]),_:1})):Fe("",!0)]),c("div",hn,[a[29]||(a[29]=c("div",{class:"text-subtitle2 text-grey-8 q-mb-sm"},"Tipo de Entrada",-1)),c("div",gn,[c("div",yn,[c("div",bn,[f(gt,{modelValue:o.ticketType,"onUpdate:modelValue":a[6]||(a[6]=i=>o.ticketType=i),val:"simple"},null,8,["modelValue"]),a[26]||(a[26]=c("div",{class:"text-weight-medium"},"Simple",-1))]),f(yt,{size:"74px",class:"q-mt-sm shadow-2"},{default:S(()=>[f(bt,{src:"https://cdn.quasar.dev/img/parallax2.jpg"})]),_:1})]),c("div",pn,[c("div",_n,[f(gt,{modelValue:o.ticketType,"onUpdate:modelValue":a[7]||(a[7]=i=>o.ticketType=i),val:"composed"},null,8,["modelValue"]),a[27]||(a[27]=c("div",{class:"text-weight-medium"},"Compuesta",-1))]),f(yt,{size:"74px",class:"q-mt-sm shadow-2"},{default:S(()=>[f(bt,{src:"https://cdn.quasar.dev/img/parallax1.jpg"})]),_:1})])]),a[30]||(a[30]=c("div",{class:"text-subtitle2 text-grey-8 q-mb-sm"},"N° de entradas",-1)),c("div",xn,[c("div",Dn,[c("div",wn,[c("div",Mn,P(o.adults)+" Adulto",1),f(G),c("div",qn,[f(O,{round:"",dense:"",flat:"",icon:"remove",class:"counter-btn",onClick:a[8]||(a[8]=i=>s.dec("adult"))}),f(O,{round:"",dense:"",flat:"",icon:"add",class:"counter-btn",onClick:a[9]||(a[9]=i=>s.inc("adult"))})])])]),c("div",Sn,[c("div",kn,[c("div",Cn,P(o.kids)+" Niños",1),f(G),c("div",Yn,[f(O,{round:"",dense:"",flat:"",icon:"remove",class:"counter-btn",onClick:a[10]||(a[10]=i=>s.dec("kid"))}),f(O,{round:"",dense:"",flat:"",icon:"add",class:"counter-btn",onClick:a[11]||(a[11]=i=>s.inc("kid"))})])])])]),c("div",Vn,[f(G),a[28]||(a[28]=c("div",{class:"text-grey-7 q-mr-sm"},"Total",-1)),c("div",Hn,P(s.formatCurrency(s.total)),1)]),c("div",Tn,[f(O,{unelevated:"","no-caps":"",class:"buy-btn",icon:"shopping_cart",label:"Comprar Ahora",loading:o.loading,disable:!s.canBuy,onClick:s.onBuy},null,8,["loading","disable","onClick"])]),o.slotKey?Fe("",!0):(Ce(),ht("div",In," Selecciona una fecha y una hora para ver precios y disponibilidad. "))])])]),_:1})])]),_:1})]),_:1}),f(kt,{modelValue:o.compraDialog,"onUpdate:modelValue":a[20]||(a[20]=i=>o.compraDialog=i),persistent:""},{default:S(()=>[f(Re,{class:"checkout-card"},{default:S(()=>[f(Ue,{class:"row items-center q-pb-sm"},{default:S(()=>[a[31]||(a[31]=c("div",{class:"text-subtitle1 text-weight-bold"},"Completa tus datos",-1)),f(G),f(O,{icon:"close",flat:"",round:"",dense:"",onClick:a[12]||(a[12]=i=>o.compraDialog=!1)})]),_:1}),f(xe),f(Ha,{ref:"buyForm",onSubmit:ca(s.continueBuy,["prevent"])},{default:S(()=>[f(Ue,{class:"q-pa-md"},{default:S(()=>[c("div",On,[c("div",Nn,[a[33]||(a[33]=c("div",{class:"text-subtitle2 text-grey-8 q-mb-md"},"Tu información",-1)),c("div",En,[c("div",An,[f(me,{modelValue:o.nombre_completo,"onUpdate:modelValue":a[13]||(a[13]=i=>o.nombre_completo=i),outlined:"",dense:"",label:"Nombre completo",rules:[i=>!!i||"Requerido"]},null,8,["modelValue","rules"])]),c("div",Qn,[f(me,{modelValue:o.dni,"onUpdate:modelValue":a[14]||(a[14]=i=>o.dni=i),outlined:"",dense:"",label:"Documento (DNI/Pasaporte)",rules:[i=>!!i||"Requerido"]},null,8,["modelValue","rules"])])]),f(xe,{spaced:""}),c("div",jn,[c("div",Pn,[f(me,{modelValue:o.email,"onUpdate:modelValue":a[15]||(a[15]=i=>o.email=i),outlined:"",dense:"",label:"Correo electrónico",type:"email",rules:[i=>!!i||"El correo es requerido",i=>/.+@.+\..+/.test(i)||"Correo inválido"]},{prepend:S(()=>[f(ce,{name:"mail"})]),_:1},8,["modelValue","rules"])]),c("div",Bn,[f(me,{modelValue:o.email_confirm,"onUpdate:modelValue":a[16]||(a[16]=i=>o.email_confirm=i),outlined:"",dense:"",label:"Confirmar correo",type:"email",rules:[i=>!!i||"Confirma tu correo",i=>i===o.email||"Los correos no coinciden"]},{prepend:S(()=>[f(ce,{name:"mail"})]),_:1},8,["modelValue","rules"])])]),c("div",Rn,[f(me,{modelValue:o.phone,"onUpdate:modelValue":a[17]||(a[17]=i=>o.phone=i),outlined:"",dense:"",label:"Teléfono (Opcional)"},{prepend:S(()=>[f(ce,{name:"call"})]),_:1},8,["modelValue"])]),c("div",Fn,[f(ma,{modelValue:o.accept_terms,"onUpdate:modelValue":a[18]||(a[18]=i=>o.accept_terms=i),dense:""},{default:S(()=>[...a[32]||(a[32]=[Le(" Acepto ",-1),c("span",{class:"text-primary cursor-pointer"},"Términos y privacidad",-1)])]),_:1},8,["modelValue"]),o.termsError?(Ce(),ht("div",Ln," Debes aceptar los términos para continuar. ")):Fe("",!0)])]),c("div",Un,[f(Re,{flat:"",bordered:"",class:"summary-card"},{default:S(()=>[f(Ue,null,{default:S(()=>[a[40]||(a[40]=c("div",{class:"text-subtitle2 text-weight-bold"},"Resumen",-1)),c("div",zn,[a[34]||(a[34]=c("div",{class:"text-caption text-grey-7"},"Evento",-1)),c("div",Zn,P(o.evento?.nombre||"—"),1)]),c("div",Kn,[a[35]||(a[35]=c("div",{class:"text-caption text-grey-7"},"Fecha",-1)),c("div",Jn,P(o.dateLabel||"—"),1)]),c("div",Xn,[a[36]||(a[36]=c("div",{class:"text-caption text-grey-7"},"Hora",-1)),c("div",Wn,P(o.slotLabel||"—"),1)]),f(xe,{spaced:""}),c("div",Gn,[a[37]||(a[37]=c("div",{class:"text-body2"},"Adultos",-1)),f(G),c("div",$n,P(o.adults),1)]),c("div",eo,[a[38]||(a[38]=c("div",{class:"text-body2"},"Niños",-1)),f(G),c("div",to,P(o.kids),1)]),f(xe,{spaced:""}),c("div",ao,[a[39]||(a[39]=c("div",{class:"text-body1 text-weight-bold"},"Total:",-1)),f(G),c("div",no,P(s.formatCurrency(s.total)),1)])]),_:1})]),_:1})])])]),_:1}),f(xe),f(va,{align:"right",class:"q-px-md q-py-sm"},{default:S(()=>[f(O,{flat:"","no-caps":"",label:"Cancelar",color:"grey-7",onClick:a[19]||(a[19]=i=>o.compraDialog=!1),disable:o.loading},null,8,["disable"]),f(O,{unelevated:"","no-caps":"",class:"buy-btn",label:"Finalizar compra",type:"submit",loading:o.loading},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}const po=ua(en,[["render",oo],["__scopeId","data-v-4617d2bd"]]);export{po as default};
